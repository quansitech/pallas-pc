(self.webpackChunk_quansitech_pallas_pc=self.webpackChunk_quansitech_pallas_pc||[]).push([[433],{64699:function(k,I,e){"use strict";e.r(I);var A=e(15009),u=e.n(A),E=e(99289),i=e.n(E),K=e(5574),l=e.n(K),F=e(36818),S=e(47527),se=e(34176),H=e(70416),ue=e(78957),_=e(89779),w=e(67294),d=e(85893);I.default=function(){var ie=(0,w.useState)(!1),q=l()(ie,2),J=q[0],$=q[1],le=F.l.useForm(),oe=l()(le,1),ee=oe[0],de=function(){var b=i()(u()().mark(function g(r){return u()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return console.log(r),$(!0),O.next=4,fetch("/api/submit",{method:"POST",body:JSON.stringify(r)});case 4:$(!1);case 5:case"end":return O.stop()}},g)}));return function(r){return b.apply(this,arguments)}}(),ce=function(){var b=i()(u()().mark(function g(r){var R,O;return u()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return console.log(r),D.next=3,fetch("/api/Staging?name=".concat(r));case 3:return R=D.sent,D.next=6,R.json();case 6:return O=D.sent,D.abrupt("return",O);case 8:case"end":return D.stop()}},g)}));return function(r){return b.apply(this,arguments)}}(),z=function(){var b=i()(u()().mark(function g(r){var R;return u()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return console.log(r.form_name,r.form_data),y.next=3,fetch("/api/Staging",{method:"POST",body:JSON.stringify(r)});case 3:return R=y.sent,y.next=6,R.json();case 6:return y.abrupt("return",y.sent);case 7:case"end":return y.stop()}},g)}));return function(r){return b.apply(this,arguments)}}();return(0,d.jsx)("div",{children:(0,d.jsxs)(F.l,{name:"assitanceListForm",form:ee,labelWrap:!0,labelCol:{span:8},onFinish:de,submitting:J,children:[(0,d.jsx)(F.l.Item,{hidden:!0,name:"assistance_list_id",children:(0,d.jsx)(S.Z,{})}),(0,d.jsx)(F.l.Item,{name:"amount",label:"\u6551\u52A9\u91D1\u989D",rules:[{required:!0}],hasFeedback:!0,children:(0,d.jsx)(se.Z,{addonAfter:"\u5143/\u5E74",min:0,precision:2,controls:!1})}),(0,d.jsx)(F.l.Item,{name:"start_date",label:"\u5F00\u59CB\u65F6\u95F4",children:(0,d.jsx)(H.Z,{})}),(0,d.jsx)(F.l.Item,{name:"file",label:"\u6587\u4EF6",children:(0,d.jsx)(F.g,{action:"/api/upload"})}),(0,d.jsx)(F.l.Buttons,{draft:!0,form:ee,initFn:ce,saveFn:z,children:(0,d.jsxs)(ue.Z,{children:[(0,d.jsx)(_.ZP,{type:"primary",htmlType:"submit",loading:J,children:"\u786E\u5B9A"}),(0,d.jsx)(_.ZP,{onClick:function(){},children:"\u53D6\u6D88"})]})})]})})}},33198:function(k,I,e){"use strict";e.r(I);var A=e(36818),u=e(67294),E=e(85893);I.default=function(){var i=function(l){console.log(l)};return(0,E.jsx)("div",{children:(0,E.jsx)(A.g,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"jpg",maxCount:1,onChange:i})})}},36818:function(k,I,e){"use strict";e.d(I,{l:function(){return L},g:function(){return Pe}});var A=e(5574),u=e.n(A),E=e(97857),i=e.n(E),K=e(15009),l=e.n(K),F=e(99289),S=e.n(F),se=e(13769),H=e.n(se),ue=e(28459),_=e(32744),w=e(10154),d=e(89779),ie=e(41202),q=e(27484),J=e.n(q),$=e(67294),le=e(12444),oe=e.n(le),ee=e(72004),de=e.n(ee),ce=e(9783),z=e.n(ce),b=function(){function h(n,c,o,j){oe()(this,h),z()(this,"id",void 0),z()(this,"uid",void 0),z()(this,"url",void 0),z()(this,"name",void 0),this.id=n,this.uid=c,this.url=o,this.name=j}return de()(h,[{key:"toObject",value:function(){return{id:this.id,uid:this.uid,url:this.url,name:this.name}}},{key:"serialize",value:function(){return{type:"UploadFile",value:this.toObject()}}}],[{key:"isUploadFile",value:function(c){return c instanceof h}}]),h}(),g=b,r=e(85893),R=["children","submitting","onFinish","readonly"],O=["children","form","draft","initFn","saveFn"],y=function(n){var c=Object.keys(n);return c=c.filter(function(o){var j=n[o];return!!j}),c.length===0},D=function(n){return console.log(n),{type:"dayjs",value:n}},je=function(n){return J()(n.value)},ve=function(n){return J().isDayjs(n)?D(n):g.isUploadFile(n)?n.serialize():n},pe=function(n){return(n==null?void 0:n.type)==="dayjs"?je(n):(n==null?void 0:n.type)==="UploadFile"?new g(n.value.id,n.value.uid,n.value.url,n.value.name):n},L=function(n){var c=n.children,o=n.submitting,j=n.onFinish,m=n.readonly,B=H()(n,R);if(!B.name)throw new Error("Form\u7EC4\u4EF6\u5FC5\u987B\u6307\u5B9Aname\u5C5E\u6027");var Q=function(){var N=S()(l()().mark(function x(W){return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!o){v.next=2;break}return v.abrupt("return");case 2:if(!j){v.next=5;break}return v.next=5,j(W);case 5:case"end":return v.stop()}},x)}));return function(W){return N.apply(this,arguments)}}();return(0,r.jsx)(ue.ZP,{theme:{token:{colorTextDisabled:m?"#000":"rgba(0, 0, 0, 0.25)"}},children:(0,r.jsx)(_.Z,i()(i()({onFinish:Q},B),{},{disabled:m,children:c}))})};L.List=_.Z.List,L.ErrorList=_.Z.ErrorList,L.Item=_.Z.Item,L.useForm=_.Z.useForm,L.useWatch=_.Z.useWatch;var ye=function(n){var c=n.children,o=n.form,j=n.draft,m=n.initFn,B=n.saveFn,Q=H()(n,O),N=(0,$.useState)(!1),x=u()(N,2),W=x[0],G=x[1],v=(0,$.useState)({}),ne=u()(v,2),X=ne[0],fe=ne[1],re=w.ZP.useMessage(),ae=u()(re,2),Y=ae[0],me=ae[1];(0,$.useEffect)(function(){var C=function(){var P=S()(l()().mark(function f(){var a,p,M,t,s,U;return l()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(typeof m!="function"){Z.next=6;break}return Z.next=3,m(o.__INTERNAL__.name);case 3:if(a=Z.sent,console.log(a),a.status&&a.data){for(p=0,M=Object.entries(a.data);p<M.length;p++)t=u()(M[p],2),s=t[0],U=t[1],Array.isArray(U)?a.data[s]=U.map(function(T){return pe(T)}):a.data[s]=pe(U);fe(a.data),G(!0)}case 6:case"end":return Z.stop()}},f)}));return function(){return P.apply(this,arguments)}}();j&&C()},[]);var he=function(){var C=S()(l()().mark(function P(){var f,a,p,M,t,s,U,te;return l()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!y(o.getFieldsValue())){T.next=3;break}return Y.error("\u8868\u5355\u4E3A\u7A7A\uFF0C\u6CA1\u6709\u5185\u5BB9\u53EF\u4EE5\u6682\u5B58"),T.abrupt("return");case 3:for(f=o.__INTERNAL__.name,a=o.getFieldsValue(),p=0,M=Object.entries(a);p<M.length;p++)t=u()(M[p],2),s=t[0],U=t[1],Array.isArray(U)?a[s]=U.map(function(Me){return ve(Me)}):a[s]=ve(U);if(typeof B!="function"){T.next=11;break}return T.next=9,B({form_name:f,form_data:a});case 9:te=T.sent,te.status?Y.success("\u6682\u5B58\u6210\u529F"):Y.error(te.info);case 11:case"end":return T.stop()}},P)}));return function(){return C.apply(this,arguments)}}(),V=function(){o.setFieldsValue(X),G(!1)};return(0,r.jsxs)(r.Fragment,{children:[me,(0,r.jsxs)(_.Z.Item,i()(i()({},Q),{},{children:[j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.ZP,{type:"dashed",htmlType:"button",onClick:he,children:"\u6682\u5B58"}),(0,r.jsx)(ie.Z,{title:"\u63D0\u793A",open:W,onOk:V,onCancel:function(){return G(!1)},children:(0,r.jsx)("p",{children:"\u662F\u5426\u8981\u6062\u590D\u6682\u5B58\u7684\u8868\u5355\u6570\u636E\uFF1F"})})]}),c]}))]})};L.Buttons=ye;var Ee=e(19632),Fe=e.n(Ee),_e=e(21054),Oe=e(86919),ge=e(74956),De=["tips","value","onChange","uploadTo","hashCheck","listType"],Ce=function(){var h=S()(l()().mark(function n(c){var o;return l()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,e(84805)("./".concat(c));case 2:return o=m.sent,m.abrupt("return",o.default);case 4:case"end":return m.stop()}},n)}));return function(c){return h.apply(this,arguments)}}(),Pe=function(n){var c=n.tips,o=n.value,j=n.onChange,m=j===void 0?function(){}:j,B=n.uploadTo,Q=B===void 0?"server":B,N=n.hashCheck,x=N===void 0?!0:N,W=n.listType,G=W===void 0?"picture":W,v=H()(n,De),ne=i()({listType:G},v),X=o==null?void 0:o.map(function(V){return V.toObject()}),fe=w.ZP.useMessage(),re=u()(fe,2),ae=re[0],Y=re[1],me=function(){var V=S()(l()().mark(function C(P){var f,a,p;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f={file:P,action:v.action,hashId:""},!x){t.next=5;break}return t.next=4,(0,ge.UM)(P);case 4:f.hashId=t.sent;case 5:return t.next=7,Ce(Q);case 7:return a=t.sent,t.next=10,a.upload(f.file,f.action,f.hashId);case 10:return p=t.sent,t.abrupt("return",p);case 12:case"end":return t.stop()}},C)}));return function(P){return V.apply(this,arguments)}}(),he=function(){var C=i()(i()({},ne),{},{onChange:function(f){var a=f.file;if(a.status==="done")if(a.response.status){var p=X||[],M={id:a.response.file_id,uid:a.uid,url:a.response.url,name:a.response.title},t=[].concat(Fe()(p),[M]);v.maxCount===1?t=t.slice(-1):t=t.slice(0,v.maxCount),m(t.map(function(s){return new g(s.id,s.uid,s.url,s.name)}))}else a.response.status===0&&ae.error(a.response.info);a.status==="removed"&&m(X.filter(function(s){return s.id!==a.id}).map(function(s){return new g(s.id,s.uid,s.url,s.name)}))},defaultFileList:X,showUploadList:{showDownloadIcon:!0},customRequest:function(f){me(f.file).then(function(a){f.onSuccess(a)})}});return(0,r.jsxs)(r.Fragment,{children:[Y,(0,r.jsx)(Oe.Z,i()(i()({},C),{},{children:(0,r.jsx)(d.ZP,{icon:(0,r.jsx)(_e.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})})),(0,r.jsx)("span",{style:{color:"#c9c6c6"},children:c})]})};return(0,$.useEffect)(function(){x&&(0,ge.ZP)()},[]),(0,r.jsx)(r.Fragment,{children:he()})}},84805:function(k,I,e){var A={"./cos":[13552,552],"./cos.ts":[13552,552],"./oss":[80503,503],"./oss.ts":[80503,503],"./server":[93928,928],"./server.ts":[93928,928],"./tos":[20311,311],"./tos.ts":[20311,311]};function u(E){if(!e.o(A,E))return Promise.resolve().then(function(){var l=new Error("Cannot find module '"+E+"'");throw l.code="MODULE_NOT_FOUND",l});var i=A[E],K=i[0];return e.e(i[1]).then(function(){return e(K)})}u.keys=function(){return Object.keys(A)},u.id=84805,k.exports=u}}]);
