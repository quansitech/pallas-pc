(self.webpackChunk_quansitech_pallas_pc=self.webpackChunk_quansitech_pallas_pc||[]).push([[433],{97488:function(re,I,e){"use strict";e.r(I);var A=e(67294),i=e(37027),R=e(24193),r=e(79961),M=e(96988),t=e(85893),s=function(){var y=(0,A.useRef)(null),l=[{title:"\u9879\u76EE/\u670D\u52A1\u540D\u79F0",dataIndex:"name",component:"Input",width:"20%",customComponentPropsFn:function(){return{placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0"}}},{title:"\u56FE\u7247",dataIndex:"image",component:"Upload",width:"30%",customComponentPropsFn:function(){return{maxCount:1,listType:"picture-card",action:"/api/upload?cate=image",tips:"\u652F\u6301jpg, png\u683C\u5F0F, 2M\u4EE5\u5185",accept:".jpg,.png",showUploadList:!1,children:(0,t.jsx)(R.Z,{})}}},{title:"\u7B80\u4ECB",dataIndex:"intro",component:"TextArea",width:"40%",customComponentPropsFn:function(){return{placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB",rows:4,showCount:!0}}},{title:function(){var E;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("span",{style:{textAlign:"center",marginTop:16,cursor:"pointer"},onClick:(E=y.current)===null||E===void 0?void 0:E.addRow,children:(0,t.jsx)(r.Z,{style:{fontSize:"20px",color:"#1890ff",marginRight:"8px"}})})})},dataIndex:"operation",editable:!1,width:"40px",render:function(E,m){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.zx,{style:{color:"#fff",border:"unset",outline:"unset"},ghost:!0,icon:(0,t.jsx)(M.Z,{style:{fontSize:"20px",color:"#ff4d4f",cursor:"pointer"}}),confirm:{title:"\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"},onClick:function(){var X;(X=y.current)===null||X===void 0||X.deleteRow(m.key)}})})},customComponentPropsFn:function(){return{title:""}}}],x=[{key:1,name:"\u793A\u4F8B\u9879\u76EE",image:[],intro:"\u8FD9\u662F\u4E00\u4E2A\u793E\u533A\u516C\u76CA\u56FE\u4E66\u9986\u7684\u793A\u4F8B\u7B80\u4ECB..."}];return(0,t.jsx)(i.l0,{name:"advancedEditable",initialValues:{data:x},children:(0,t.jsx)(i.l0.Item,{name:"data",children:(0,t.jsx)(i.r8,{columns:l,canUpdateNum:"add_only",onChange:function(E){console.log(E)},ref:y})})})};I.default=function(){return(0,t.jsx)(s,{})}},43752:function(re,I,e){"use strict";e.r(I);var A=e(37027),i=e(24679),R=e(67294),r=e(85893),M={round:function(s,c){var y=Math.pow(10,c);return Math.round(s*y)/y}};I.default=function(){var t=[{title:"\u5F00\u652F\u9879",dataIndex:"budget_name"},{title:"\u5355\u4EF7",component:"InputNumber",dataIndex:"budget_unit_price"},{title:"\u6570\u91CF",component:"TextArea",customComponentPropsFn:function(l){return{maxLength:10,minLength:5}},dataIndex:"budget_quantity"},{title:"\u8FD9\u9879\u4E0D\u53EF\u4FEE\u6539",component:"Input",dataIndex:"no_update",editable:!1},{title:"\u5C0F\u8BA1",dataIndex:"budget_subtotal",calc:function(l){var x,_;return M.round(parseFloat((x=l==null?void 0:l.budget_unit_price)!==null&&x!==void 0?x:0)*parseFloat((_=l==null?void 0:l.budget_quantity)!==null&&_!==void 0?_:0),2)}},{title:"\u5907\u6CE8",dataIndex:"budget_remark"}],s=[{key:1,budget_name:"\u529E\u516C\u7528\u54C1",budget_unit_price:2,budget_quantity:3,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"},{key:2,budget_name:"\u7ECF\u8D39",budget_unit_price:3,budget_quantity:4,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"}],c=function(l){var x=0;return l.forEach(function(_){var E,m;x+=M.round(((E=_==null?void 0:_.budget_quantity)!==null&&E!==void 0?E:0)*((m=_==null?void 0:_.budget_unit_price)!==null&&m!==void 0?m:0),2)}),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(i.Z.Summary.Row,{children:[(0,r.jsx)(i.Z.Summary.Cell,{index:0,colSpan:4,children:"\u5408\u8BA1"}),(0,r.jsx)(i.Z.Summary.Cell,{index:1,children:(0,r.jsx)("span",{children:x})})]})})};return(0,r.jsx)(A.l0,{name:"editableEditable",initialValues:{data:s},children:(0,r.jsx)(A.l0.Item,{name:"data",children:(0,r.jsx)(A.r8,{columns:t,summary:c,canUpdateNum:"delete_only",onChange:function(l){console.log(l)}})})})}},64699:function(re,I,e){"use strict";e.r(I);var A=e(15009),i=e.n(A),R=e(99289),r=e.n(R),M=e(5574),t=e.n(M),s=e(37027),c=e(50719),y=e(88385),l=e(97019),x=e(78957),_=e(15867),E=e(67294),m=e(85893);I.default=function(){var Q=(0,E.useState)(!1),X=t()(Q,2),le=X[0],B=X[1],ce=s.l0.useForm(),fe=t()(ce,1),de=fe[0],me=function(){var ue=r()(i()().mark(function k(a){return i()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return B(!0),Y.next=3,fetch("/api/submit",{method:"POST",body:JSON.stringify(a)});case 3:B(!1);case 4:case"end":return Y.stop()}},k)}));return function(a){return ue.apply(this,arguments)}}(),he=function(){var ue=r()(i()().mark(function k(a){var oe,Y;return i()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,fetch("/api/Staging?name=".concat(a));case 2:return oe=q.sent,q.next=5,oe.json();case 5:return Y=q.sent,q.abrupt("return",Y);case 7:case"end":return q.stop()}},k)}));return function(a){return ue.apply(this,arguments)}}(),te=function(){var ue=r()(i()().mark(function k(a){var oe;return i()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,fetch("/api/Staging",{method:"POST",body:JSON.stringify(a)});case 2:return oe=J.sent,J.next=5,oe.json();case 5:return J.abrupt("return",J.sent);case 6:case"end":return J.stop()}},k)}));return function(a){return ue.apply(this,arguments)}}();return(0,m.jsx)("div",{children:(0,m.jsxs)(s.l0,{name:"assitanceListForm",form:de,labelWrap:!0,labelCol:{span:8},onFinish:me,submitting:le,children:[(0,m.jsx)(s.l0.Item,{hidden:!0,name:"assistance_list_id",children:(0,m.jsx)(c.Z,{})}),(0,m.jsx)(s.l0.Item,{name:"amount",label:"\u6551\u52A9\u91D1\u989D",rules:[{required:!0}],hasFeedback:!0,children:(0,m.jsx)(y.Z,{addonAfter:"\u5143/\u5E74",min:0,precision:2,controls:!1})}),(0,m.jsx)(s.l0.Item,{name:"start_date",label:"\u5F00\u59CB\u65F6\u95F4",children:(0,m.jsx)(l.Z,{})}),(0,m.jsx)(s.l0.Item,{name:"file",label:"\u6587\u4EF6",children:(0,m.jsx)(s.gq,{action:"/api/upload"})}),(0,m.jsx)(s.l0.Buttons,{draft:!0,form:de,initFn:he,saveFn:te,children:(0,m.jsxs)(x.Z,{children:[(0,m.jsx)(_.ZP,{type:"primary",htmlType:"submit",loading:le,children:"\u786E\u5B9A"}),(0,m.jsx)(_.ZP,{onClick:function(){},children:"\u53D6\u6D88"})]})})]})})}},35352:function(re,I,e){"use strict";e.r(I);var A=e(37027),i=e(67294),R=e(85893);I.default=function(){var r=function(t){};return(0,R.jsx)("div",{children:(0,R.jsx)(A.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",maxCount:1,onChange:r,ifDrag:!0})})}},33198:function(re,I,e){"use strict";e.r(I);var A=e(15009),i=e.n(A),R=e(99289),r=e.n(R),M=e(37027),t=e(67294),s=e(15867),c=e(85893);I.default=function(){var y=function(x){};return(0,c.jsxs)(M.l0,{name:"upload-form",onFinish:function(){var l=r()(i()().mark(function x(_){return i()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:console.log("value",_);case 1:case"end":return m.stop()}},x)}));return function(x){return l.apply(this,arguments)}}(),children:[(0,c.jsx)(M.l0.Item,{name:"upload",label:"\u4E0A\u4F20",rules:[{required:!0}],children:(0,c.jsx)(M.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",multiple:!0,onChange:y})}),(0,c.jsx)(s.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]})}},44559:function(re,I,e){"use strict";var A=e(15009),i=e.n(A),R=e(99289),r=e.n(R),M={getFileType:{fileToArrayBuffer:function(){var t=r()(i()().mark(function c(y,l){var x;return i()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:x=new FileReader,x.onload=function(m){if(typeof l=="function")return l(m.target.result)},x.readAsArrayBuffer(y);case 3:case"end":return E.stop()}},c)}));function s(c,y){return t.apply(this,arguments)}return s}(),getFileTypeViaHeader:function(s){for(var c=new Uint8Array(s),y=c.slice(0,4),l=c.slice(0,16),x="",_="",E,m=0;m<y.length;m++)x+=y[m].toString(16);for(var Q=0;Q<l.length;Q++)_+=l[Q].toString(16);switch(x){case"89504e47":E="image/png";break;case"47494638":E="image/gif";break;case"ffd8ffDB":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":E="image/jpeg";break;case"00020":case"00018":case"00024":case"0001c":_.lastIndexOf("000")===22?E="image/heic":E="unknown";break;default:E="unknown";break}return E},start:function(){var t=r()(i()().mark(function c(y){var l,x;return i()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return l=this,x=new Promise(function(m){l.fileToArrayBuffer(y,function(Q){var X=l.getFileTypeViaHeader(Q);m(X)})}),E.abrupt("return",x);case 3:case"end":return E.stop()}},c,this)}));function s(c){return t.apply(this,arguments)}return s}()},getSuffix:function(s){var c=s.lastIndexOf("."),y="";return c!==-1&&(y=s.substring(c)),y},handleError:{hasErrMsg:function(s){return s.hasOwnProperty("err_msg")},hasErrInfo:function(s){return s.hasOwnProperty("status")&&parseInt(s.status)===0&&s.hasOwnProperty("info")},hasError:function(s){var c=M.handleError;return c.hasErrMsg(s)||c.hasErrInfo(s)?s:!1},extractError:function(s){var c=M.handleError;if(c.hasErrMsg(s))return s.err_msg;if(c.hasErrInfo(s))return s.info}}};I.Z=M},37027:function(re,I,e){"use strict";e.d(I,{zx:function(){return ve},r8:function(){return Xe},l0:function(){return se},gq:function(){return ye}});var A=e(5574),i=e.n(A),R=e(97857),r=e.n(R),M=e(15009),t=e.n(M),s=e(99289),c=e.n(s),y=e(13769),l=e.n(y),x=e(28459),_=e(87174),E=e(10154),m=e(15867),Q=e(27911),X=e(27484),le=e.n(X),B=e(67294),ce=e(12444),fe=e.n(ce),de=e(72004),me=e.n(de),he=e(9783),te=e.n(he),ue=function(){function p(n,f,u,C){fe()(this,p),te()(this,"id",void 0),te()(this,"uid",void 0),te()(this,"url",void 0),te()(this,"name",void 0),this.id=n,this.uid=f,this.url=u,this.name=C}return me()(p,[{key:"toObject",value:function(){return{id:this.id,uid:this.uid,url:this.url,name:this.name}}},{key:"serialize",value:function(){return{type:"UploadFile",value:this.toObject()}}}],[{key:"isUploadFile",value:function(f){return f instanceof p}}]),p}(),k=ue,a=e(85893),oe=["children","submitting","onFinish","readonly"],Y=["children","form","draft","initFn","saveFn"],J=function(n){var f=Object.keys(n);return f=f.filter(function(u){var C=n[u];return!!C}),f.length===0},q=function(n){return{type:"dayjs",value:n}},be=function(n){return le()(n.value)},_e=function(n){return le().isDayjs(n)?q(n):k.isUploadFile(n)?n.serialize():n},pe=function(n){return(n==null?void 0:n.type)==="dayjs"?be(n):(n==null?void 0:n.type)==="UploadFile"?new k(n.value.id,n.value.uid,n.value.url,n.value.name):n},se=function(n){var f=n.children,u=n.submitting,C=n.onFinish,d=n.readonly,b=l()(n,oe);if(!b.name)throw new Error("Form\u7EC4\u4EF6\u5FC5\u987B\u6307\u5B9Aname\u5C5E\u6027");var L=function(){var F=c()(t()().mark(function S(j){return t()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!u){T.next=2;break}return T.abrupt("return");case 2:if(!C){T.next=5;break}return T.next=5,C(j);case 5:case"end":return T.stop()}},S)}));return function(j){return F.apply(this,arguments)}}();return(0,a.jsx)(x.ZP,{theme:{token:{colorTextDisabled:d?"#000":"rgba(0, 0, 0, 0.25)"}},children:(0,a.jsx)(_.Z,r()(r()({onFinish:L},b),{},{disabled:d,children:f}))})};se.List=_.Z.List,se.ErrorList=_.Z.ErrorList,se.Item=_.Z.Item,se.useForm=_.Z.useForm,se.useWatch=_.Z.useWatch;var Pe=function(n){var f=n.children,u=n.form,C=n.draft,d=n.initFn,b=n.saveFn,L=l()(n,Y),F=(0,B.useState)(!1),S=i()(F,2),j=S[0],$=S[1],T=(0,B.useState)({}),Z=i()(T,2),ee=Z[0],h=Z[1],z=E.ZP.useMessage(),O=i()(z,2),W=O[0],N=O[1];(0,B.useEffect)(function(){var K=function(){var ae=c()(t()().mark(function V(){var o,P,g,v,w,H;return t()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(typeof d!="function"){G.next=5;break}return G.next=3,d(u.__INTERNAL__.name);case 3:if(o=G.sent,o.status&&o.data){for(P=0,g=Object.entries(o.data);P<g.length;P++)v=i()(g[P],2),w=v[0],H=v[1],Array.isArray(H)?o.data[w]=H.map(function(ne){return pe(ne)}):o.data[w]=pe(H);h(o.data),$(!0)}case 5:case"end":return G.stop()}},V)}));return function(){return ae.apply(this,arguments)}}();C&&K()},[]);var U=function(){var K=c()(t()().mark(function ae(){var V,o,P,g,v,w,H,D;return t()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!J(u.getFieldsValue())){ne.next=3;break}return W.error("\u8868\u5355\u4E3A\u7A7A\uFF0C\u6CA1\u6709\u5185\u5BB9\u53EF\u4EE5\u6682\u5B58"),ne.abrupt("return");case 3:for(V=u.__INTERNAL__.name,o=u.getFieldsValue(),P=0,g=Object.entries(o);P<g.length;P++)v=i()(g[P],2),w=v[0],H=v[1],Array.isArray(H)?o[w]=H.map(function(en){return _e(en)}):o[w]=_e(H);if(typeof b!="function"){ne.next=11;break}return ne.next=9,b({form_name:V,form_data:o});case 9:D=ne.sent,D.status?W.success("\u6682\u5B58\u6210\u529F"):W.error(D.info);case 11:case"end":return ne.stop()}},ae)}));return function(){return K.apply(this,arguments)}}(),ie=function(){u.setFieldsValue(ee),$(!1)};return(0,a.jsxs)(a.Fragment,{children:[N,(0,a.jsxs)(_.Z.Item,r()(r()({},L),{},{children:[C&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.ZP,{type:"dashed",htmlType:"button",onClick:U,children:"\u6682\u5B58"}),(0,a.jsx)(Q.Z,{title:"\u63D0\u793A",open:j,onOk:ie,onCancel:function(){return $(!1)},children:(0,a.jsx)("p",{children:"\u662F\u5426\u8981\u6062\u590D\u6682\u5B58\u7684\u8868\u5355\u6570\u636E\uFF1F"})})]}),f]}))]})};se.Buttons=Pe;var De=e(19632),ge=e.n(De),Oe=e(56853),Fe=e(21054),Ee=e(10911),Ce=e(74956),xe=e(44559),Ie=["tips","value","onChange","uploadTo","hashCheck","listType","ifDrag"],Ae=Ee.Z.Dragger,Me=function(){var p=c()(t()().mark(function n(f){var u;return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e(84805)("./".concat(f));case 2:return u=d.sent,d.abrupt("return",u.default);case 4:case"end":return d.stop()}},n)}));return function(f){return p.apply(this,arguments)}}(),ye=function(n){var f=n.tips,u=n.value,C=n.onChange,d=C===void 0?function(){}:C,b=n.uploadTo,L=b===void 0?"server":b,F=n.hashCheck,S=F===void 0?!0:F,j=n.listType,$=j===void 0?"picture":j,T=n.ifDrag,Z=l()(n,Ie),ee=r()({listType:$},Z),h=u==null?void 0:u.map(function(V){var o=V.toObject();return Object.assign(o,{uid:o.uid||o.id})}),z=E.ZP.useMessage(),O=i()(z,2),W=O[0],N=O[1],U=function(){var V=c()(t()().mark(function o(P){var g,v,w;return t()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(g={file:P,action:Z.action,hashId:""},!S){D.next=5;break}return D.next=4,(0,Ce.UM)(P);case 4:g.hashId=D.sent;case 5:return D.next=7,Me(L);case 7:return v=D.sent,D.next=10,v.upload(g.file,g.action,g.hashId);case 10:return w=D.sent,D.abrupt("return",w);case 12:case"end":return D.stop()}},o)}));return function(P){return V.apply(this,arguments)}}(),ie=function(o,P,g,v){var w=h||[],H={id:o,uid:P,url:g,name:v},D=[].concat(ge()(w),[H]);Z.maxCount===1?D=D.slice(-1):D=D.slice(0,Z.maxCount),d(D.map(function(G){return new k(G.id,G.uid,G.url,G.name)}))},K=function(o){var P;d(h==null||(P=h.filter(function(g){return g.id!==o}))===null||P===void 0?void 0:P.map(function(g){return new k(g.id,g.uid,g.url,g.name)}))},ae=function(){var o=r()(r()({},ee),{},{onChange:function(g){var v=g.file;if(v.status==="done"&&(v.response.status?ie(v.response.file_id,v.uid,v.response.url,v.response.title):parseInt(v.response.status)===0&&W.error(v.response.info)),v.status==="removed"){var w;K((v==null?void 0:v.id)||(v==null||(w=v.response)===null||w===void 0?void 0:w.file_id))}},defaultFileList:h,showUploadList:{showDownloadIcon:!0},onPreview:function(g){var v;window.open((g==null?void 0:g.url)||(g==null||(v=g.response)===null||v===void 0?void 0:v.url),"_blank")},customRequest:function(g){U(g.file).then(function(v){xe.Z.handleError.hasError(v)?g.onError(new Error(xe.Z.handleError.extractError(v))):g.onSuccess(v)})}});return(0,a.jsxs)(a.Fragment,{children:[N,T?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(Ae,r()(r()({},o),{},{children:o!=null&&o.children?o==null?void 0:o.children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(Oe.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u8FDB\u884C\u4E0A\u4F20"}),(0,a.jsx)("span",{className:"drag-drop-upload-tips",children:f})]})}))}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ee.Z,r()(r()({},o),{},{children:o!=null&&o.children?o==null?void 0:o.children:(0,a.jsx)(m.ZP,{icon:(0,a.jsx)(Fe.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})})),(0,a.jsx)("span",{style:{color:"#c9c6c6"},children:f})]})]})};return(0,B.useEffect)(function(){S&&(0,Ce.ZP)()},[]),(0,a.jsx)(a.Fragment,{children:ae()})},Te=e(24679),Ue=e(71230),Re=["onChange","value"],Be=function(n){var f=n.onChange,u=n.value,C=l()(n,Re);return(0,a.jsx)(ye,r()({value:u,onChange:f},C))},Le=Be,je=e(50719),Se=["onChange"],We=function(n){var f=n.onChange,u=l()(n,Se),C=function(b){n.onChange&&n.onChange(b.target.value)};return(0,a.jsx)(je.Z,r()({onChange:C},u))},$e=We,Ze=e(88385),Ke=["onChange"],we=function(n){var f=n.onChange,u=l()(n,Ke),C=function(b){n.onChange&&n.onChange(b)};return(0,a.jsx)(Ze.Z,r()({bordered:!1,onChange:C},u))},ze=we,Ne=["onChange","className"],ke=function(n){var f=window.getComputedStyle(n),u=f.getPropertyValue("box-sizing")||f.getPropertyValue("-moz-box-sizing")||f.getPropertyValue("-webkit-box-sizing"),C=parseFloat(f.getPropertyValue("padding-bottom"))+parseFloat(f.getPropertyValue("padding-top")),d=parseFloat(f.getPropertyValue("border-bottom-width"))+parseFloat(f.getPropertyValue("border-top-width")),b=n.scrollHeight;if(u==="border-box")return b+=d;if(u==="content-box")return b-=C},Ve=function(n){var f=n.onChange,u=n.className,C=u===void 0?"":u,d=l()(n,Ne),b=(0,B.useState)(!1),L=i()(b,2),F=L[0],S=L[1],j=x.ZP.useConfig(),$=j.componentDisabled,T=(0,B.useCallback)(function(h){d.autoSize&&$&&h&&h.resizableTextArea&&h.resizableTextArea.textArea&&(h.resizableTextArea.textArea.style.height="".concat(ke(h.resizableTextArea.textArea),"px"))},[$]),Z=function(z){n.onChange&&n.onChange(z.target.value)},ee=d.value||d.defaultValue||"";return(0,a.jsxs)("div",{className:"component_editable_table_text_area",children:[(0,a.jsx)(je.Z.TextArea,r()({ref:T,className:"component_editable_table_text_area_input ".concat(F?"focus":""," ").concat(C),onChange:Z,onFocus:function(){S(!0)},onBlur:function(){S(!1)}},d)),F&&d.maxLength?(0,a.jsx)("div",{className:"component_editable_table_text_area_length",children:"".concat(ee.length," / ").concat(d.maxLength)}):""]})},He=Ve,Ge=["children","dataIndex","onChange","component","editable","calc","customComponentProps"],Je={Input:$e,InputNumber:ze,TextArea:He,Upload:Le},Qe=(0,B.memo)(function(p){var n=p.children,f=p.dataIndex,u=p.onChange,C=p.component,d=C===void 0?"Input":C,b=p.editable,L=p.calc,F=p.customComponentProps,S=F===void 0?{}:F,j=l()(p,Ge);if(L)return(0,a.jsx)("td",r()(r()({},j),{},{children:L(j.record)}));var $=r()(te()(te()({},d==="Upload"?"value":"defaultValue",(j==null?void 0:j.record)&&(j==null?void 0:j.record[f])),"onChange",u),S);return(0,a.jsx)("td",r()(r()({},j),{},{children:b?B.createElement(Je[d],$):n}))}),Xe=(0,B.forwardRef)(function(p,n){var f=p.value,u=f===void 0?[]:f,C=p.columns,d=p.onChange,b=p.summary,L=p.canUpdateNum,F=L===void 0?!0:L,S=x.ZP.useConfig(),j=S.componentDisabled;(0,B.useImperativeHandle)(n,function(){return{addRow:ee,deleteRow:Z}});var $=(0,B.useRef)(u);$.current=u;var T=C.map(function(h){return r()(r()({},h),{},{onCell:function(O){return{record:O,dataIndex:h.dataIndex,title:h.title,component:h==null?void 0:h.component,editable:h.editable===void 0?!0:h.editable,calc:h.calc,customComponentProps:typeof h.customComponentPropsFn=="function"?h.customComponentPropsFn(O):{},onChange:function(N){d&&d(u.map(function(U,ie){return U.key===O.key&&(U[h.dataIndex]=N),U}))}}}})}),Z=function(z){d&&d(u.filter(function(O){return O.key!==z}))},ee=function(){var z,O=0,W=(z=$.current)!==null&&z!==void 0?z:[];W.forEach(function(U){U.key>O&&(O=U.key)});var N={};C.forEach(function(U){U.editable===!0&&(N[U.dataIndex]="")}),N.key=O+1,d&&d([].concat(ge()(W),[N]))};return!j&&F&&F!=="add_only"&&T.push({title:"\u64CD\u4F5C",dataIndex:"operation",editable:!1,width:"40px",render:function(z,O){return(0,a.jsx)(ve,{type:"primary",danger:!0,confirm:{title:"\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"},onClick:function(){return Z(O.key)},children:"\u5220\u9664"})}}),(0,a.jsx)(Te.Z,r()(r()({pagination:!1,rowClassName:"budget-td",components:{body:{cell:Qe}},summary:b},!j&&F&&F!=="delete_only"?{footer:function(){return(0,a.jsx)(Ue.Z,{justify:"center",children:(0,a.jsx)(ve,{type:"primary",onClick:ee,children:"\u65B0\u589E"})})}}:{}),{},{dataSource:u,columns:T,bordered:!0}))}),Ye=e(76306),qe=["children","confirm"],ve=function(n){var f=n.children,u=n.confirm,C=l()(n,qe),d=(0,B.useState)(!1),b=i()(d,2),L=b[0],F=b[1],S=(0,B.useState)(!1),j=i()(S,2),$=j[0],T=j[1],Z=(0,B.useRef)(!1),ee=function(W){u||h(W)},h=function(){var O=c()(t()().mark(function W(N){var U;return t()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!(!Z.current&&C.onClick)){K.next=9;break}return Z.current=!0,U=setTimeout(function(){F(!0),T(!0)},300),K.next=5,C.onClick();case 5:clearTimeout(U),F(!1),T(!1),Z.current=!1;case 9:case"end":return K.stop()}},W)}));return function(N){return O.apply(this,arguments)}}(),z=function(W){var N=W.children,U=function(){var ie=c()(t()().mark(function K(ae){return t()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,h(ae);case 2:case"end":return o.stop()}},K)}));return function(ae){return ie.apply(this,arguments)}}();return u&&!L?(0,a.jsx)(Ye.Z,{title:u==null?void 0:u.title,description:u==null?void 0:u.description,onConfirm:U,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:N}):N};return(0,a.jsx)(z,{children:(0,a.jsx)(m.ZP,r()(r()({loading:L,disabled:$},C),{},{onClick:ee,children:f}))})}},84805:function(re,I,e){var A={"./cos":[13552,552],"./cos.ts":[13552,552],"./oss":[80503,503],"./oss.ts":[80503,503],"./server":[93928,928],"./server.ts":[93928,928],"./tos":[20311,311],"./tos.ts":[20311,311]};function i(R){if(!e.o(A,R))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+R+"'");throw t.code="MODULE_NOT_FOUND",t});var r=A[R],M=r[0];return e.e(r[1]).then(function(){return e(M)})}i.keys=function(){return Object.keys(A)},i.id=84805,re.exports=i}}]);
