(self.webpackChunk_quansitech_pallas_pc=self.webpackChunk_quansitech_pallas_pc||[]).push([[433],{97488:function(re,I,e){"use strict";e.r(I);var A=e(67294),l=e(37027),R=e(24193),r=e(79961),M=e(96988),t=e(85893),o=function(){var y=(0,A.useRef)(null),i=[{title:"\u9879\u76EE/\u670D\u52A1\u540D\u79F0",dataIndex:"name",component:"Input",width:"20%",customComponentPropsFn:function(){return{placeholder:"\u8BF7\u8F93\u5165\u9879\u76EE\u540D\u79F0"}}},{title:"\u56FE\u7247",dataIndex:"image",component:"Upload",width:"30%",customComponentPropsFn:function(){return{maxCount:1,listType:"picture-card",action:"/api/upload?cate=image",tips:"\u652F\u6301jpg, png\u683C\u5F0F, 2M\u4EE5\u5185",accept:".jpg,.png",showUploadList:!1,children:(0,t.jsx)(R.Z,{})}}},{title:"\u7B80\u4ECB",dataIndex:"intro",component:"TextArea",width:"40%",customComponentPropsFn:function(){return{placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB",rows:4,showCount:!0}}},{title:function(){var C;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("span",{style:{textAlign:"center",marginTop:16,cursor:"pointer"},onClick:(C=y.current)===null||C===void 0?void 0:C.addRow,children:(0,t.jsx)(r.Z,{style:{fontSize:"20px",color:"#1890ff",marginRight:"8px"}})})})},dataIndex:"operation",editable:!1,width:"40px",render:function(C,f){return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(l.zx,{style:{color:"#fff",border:"unset",outline:"unset"},ghost:!0,icon:(0,t.jsx)(M.Z,{style:{fontSize:"20px",color:"#ff4d4f",cursor:"pointer"}}),confirm:{title:"\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"},onClick:function(){var X;console.log("del",f.key),(X=y.current)===null||X===void 0||X.deleteRow(f.key)}})})},customComponentPropsFn:function(){return{title:""}}}],x=[{key:1,name:"\u793A\u4F8B\u9879\u76EE",image:[],intro:"\u8FD9\u662F\u4E00\u4E2A\u793E\u533A\u516C\u76CA\u56FE\u4E66\u9986\u7684\u793A\u4F8B\u7B80\u4ECB..."}];return(0,t.jsx)(l.l0,{name:"advancedEditable",initialValues:{data:x},children:(0,t.jsx)(l.l0.Item,{name:"data",children:(0,t.jsx)(l.r8,{columns:i,canUpdateNum:"add_only",ref:y})})})};I.default=function(){return(0,t.jsx)(o,{})}},43752:function(re,I,e){"use strict";e.r(I);var A=e(37027),l=e(24679),R=e(67294),r=e(85893),M={round:function(o,c){var y=Math.pow(10,c);return Math.round(o*y)/y}};I.default=function(){var t=[{title:"\u5F00\u652F\u9879",dataIndex:"budget_name"},{title:"\u5355\u4EF7",component:"InputNumber",dataIndex:"budget_unit_price"},{title:"\u6570\u91CF",component:"TextArea",customComponentPropsFn:function(i){return{maxLength:10,minLength:5}},dataIndex:"budget_quantity"},{title:"\u8FD9\u9879\u4E0D\u53EF\u4FEE\u6539",component:"Input",dataIndex:"no_update",editable:!1},{title:"\u5C0F\u8BA1",dataIndex:"budget_subtotal",calc:function(i){var x,g;return M.round(parseFloat((x=i==null?void 0:i.budget_unit_price)!==null&&x!==void 0?x:0)*parseFloat((g=i==null?void 0:i.budget_quantity)!==null&&g!==void 0?g:0),2)}},{title:"\u5907\u6CE8",dataIndex:"budget_remark"}],o=[{key:1,budget_name:"\u529E\u516C\u7528\u54C1",budget_unit_price:2,budget_quantity:3,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"},{key:2,budget_name:"\u7ECF\u8D39",budget_unit_price:3,budget_quantity:4,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"}],c=function(i){var x=0;return i.forEach(function(g){var C,f;x+=M.round(((C=g==null?void 0:g.budget_quantity)!==null&&C!==void 0?C:0)*((f=g==null?void 0:g.budget_unit_price)!==null&&f!==void 0?f:0),2)}),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(l.Z.Summary.Row,{children:[(0,r.jsx)(l.Z.Summary.Cell,{index:0,colSpan:4,children:"\u5408\u8BA1"}),(0,r.jsx)(l.Z.Summary.Cell,{index:1,children:(0,r.jsx)("span",{children:x})})]})})};return(0,r.jsx)(A.l0,{name:"editableEditable",initialValues:{data:o},children:(0,r.jsx)(A.l0.Item,{name:"data",children:(0,r.jsx)(A.r8,{columns:t,summary:c,canUpdateNum:"delete_only",onChange:function(i){console.log(i)}})})})}},64699:function(re,I,e){"use strict";e.r(I);var A=e(15009),l=e.n(A),R=e(99289),r=e.n(R),M=e(5574),t=e.n(M),o=e(37027),c=e(50719),y=e(88385),i=e(97019),x=e(78957),g=e(15867),C=e(67294),f=e(85893);I.default=function(){var Q=(0,C.useState)(!1),X=t()(Q,2),ie=X[0],B=X[1],ce=o.l0.useForm(),fe=t()(ce,1),de=fe[0],me=function(){var ue=r()(l()().mark(function k(a){return l()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return B(!0),Y.next=3,fetch("/api/submit",{method:"POST",body:JSON.stringify(a)});case 3:B(!1);case 4:case"end":return Y.stop()}},k)}));return function(a){return ue.apply(this,arguments)}}(),he=function(){var ue=r()(l()().mark(function k(a){var se,Y;return l()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,fetch("/api/Staging?name=".concat(a));case 2:return se=q.sent,q.next=5,se.json();case 5:return Y=q.sent,q.abrupt("return",Y);case 7:case"end":return q.stop()}},k)}));return function(a){return ue.apply(this,arguments)}}(),te=function(){var ue=r()(l()().mark(function k(a){var se;return l()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,fetch("/api/Staging",{method:"POST",body:JSON.stringify(a)});case 2:return se=J.sent,J.next=5,se.json();case 5:return J.abrupt("return",J.sent);case 6:case"end":return J.stop()}},k)}));return function(a){return ue.apply(this,arguments)}}();return(0,f.jsx)("div",{children:(0,f.jsxs)(o.l0,{name:"assitanceListForm",form:de,labelWrap:!0,labelCol:{span:8},onFinish:me,submitting:ie,children:[(0,f.jsx)(o.l0.Item,{hidden:!0,name:"assistance_list_id",children:(0,f.jsx)(c.Z,{})}),(0,f.jsx)(o.l0.Item,{name:"amount",label:"\u6551\u52A9\u91D1\u989D",rules:[{required:!0}],hasFeedback:!0,children:(0,f.jsx)(y.Z,{addonAfter:"\u5143/\u5E74",min:0,precision:2,controls:!1})}),(0,f.jsx)(o.l0.Item,{name:"start_date",label:"\u5F00\u59CB\u65F6\u95F4",children:(0,f.jsx)(i.Z,{})}),(0,f.jsx)(o.l0.Item,{name:"file",label:"\u6587\u4EF6",children:(0,f.jsx)(o.gq,{action:"/api/upload"})}),(0,f.jsx)(o.l0.Buttons,{draft:!0,form:de,initFn:he,saveFn:te,children:(0,f.jsxs)(x.Z,{children:[(0,f.jsx)(g.ZP,{type:"primary",htmlType:"submit",loading:ie,children:"\u786E\u5B9A"}),(0,f.jsx)(g.ZP,{onClick:function(){},children:"\u53D6\u6D88"})]})})]})})}},35352:function(re,I,e){"use strict";e.r(I);var A=e(37027),l=e(67294),R=e(85893);I.default=function(){var r=function(t){};return(0,R.jsx)("div",{children:(0,R.jsx)(A.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",maxCount:1,onChange:r,ifDrag:!0})})}},33198:function(re,I,e){"use strict";e.r(I);var A=e(15009),l=e.n(A),R=e(99289),r=e.n(R),M=e(37027),t=e(67294),o=e(15867),c=e(85893);I.default=function(){var y=function(x){};return(0,c.jsxs)(M.l0,{name:"upload-form",onFinish:function(){var i=r()(l()().mark(function x(g){return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:console.log("value",g);case 1:case"end":return f.stop()}},x)}));return function(x){return i.apply(this,arguments)}}(),children:[(0,c.jsx)(M.l0.Item,{name:"upload",label:"\u4E0A\u4F20",rules:[{required:!0}],children:(0,c.jsx)(M.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",multiple:!0,onChange:y})}),(0,c.jsx)(o.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]})}},44559:function(re,I,e){"use strict";var A=e(15009),l=e.n(A),R=e(99289),r=e.n(R),M={getFileType:{fileToArrayBuffer:function(){var t=r()(l()().mark(function c(y,i){var x;return l()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:x=new FileReader,x.onload=function(f){if(typeof i=="function")return i(f.target.result)},x.readAsArrayBuffer(y);case 3:case"end":return C.stop()}},c)}));function o(c,y){return t.apply(this,arguments)}return o}(),getFileTypeViaHeader:function(o){for(var c=new Uint8Array(o),y=c.slice(0,4),i=c.slice(0,16),x="",g="",C,f=0;f<y.length;f++)x+=y[f].toString(16);for(var Q=0;Q<i.length;Q++)g+=i[Q].toString(16);switch(x){case"89504e47":C="image/png";break;case"47494638":C="image/gif";break;case"ffd8ffDB":case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":case"ffd8ffe3":case"ffd8ffe8":C="image/jpeg";break;case"00020":case"00018":case"00024":case"0001c":g.lastIndexOf("000")===22?C="image/heic":C="unknown";break;default:C="unknown";break}return C},start:function(){var t=r()(l()().mark(function c(y){var i,x;return l()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return i=this,x=new Promise(function(f){i.fileToArrayBuffer(y,function(Q){var X=i.getFileTypeViaHeader(Q);f(X)})}),C.abrupt("return",x);case 3:case"end":return C.stop()}},c,this)}));function o(c){return t.apply(this,arguments)}return o}()},getSuffix:function(o){var c=o.lastIndexOf("."),y="";return c!==-1&&(y=o.substring(c)),y},handleError:{hasErrMsg:function(o){return o.hasOwnProperty("err_msg")},hasErrInfo:function(o){return o.hasOwnProperty("status")&&parseInt(o.status)===0&&o.hasOwnProperty("info")},hasError:function(o){var c=M.handleError;return c.hasErrMsg(o)||c.hasErrInfo(o)?o:!1},extractError:function(o){var c=M.handleError;if(c.hasErrMsg(o))return o.err_msg;if(c.hasErrInfo(o))return o.info}}};I.Z=M},37027:function(re,I,e){"use strict";e.d(I,{zx:function(){return ve},r8:function(){return Xe},l0:function(){return oe},gq:function(){return ye}});var A=e(5574),l=e.n(A),R=e(97857),r=e.n(R),M=e(15009),t=e.n(M),o=e(99289),c=e.n(o),y=e(13769),i=e.n(y),x=e(28459),g=e(87174),C=e(10154),f=e(15867),Q=e(27911),X=e(27484),ie=e.n(X),B=e(67294),ce=e(12444),fe=e.n(ce),de=e(72004),me=e.n(de),he=e(9783),te=e.n(he),ue=function(){function _(n,m,u,E){fe()(this,_),te()(this,"id",void 0),te()(this,"uid",void 0),te()(this,"url",void 0),te()(this,"name",void 0),this.id=n,this.uid=m,this.url=u,this.name=E}return me()(_,[{key:"toObject",value:function(){return{id:this.id,uid:this.uid,url:this.url,name:this.name}}},{key:"serialize",value:function(){return{type:"UploadFile",value:this.toObject()}}}],[{key:"isUploadFile",value:function(m){return m instanceof _}}]),_}(),k=ue,a=e(85893),se=["children","submitting","onFinish","readonly"],Y=["children","form","draft","initFn","saveFn"],J=function(n){var m=Object.keys(n);return m=m.filter(function(u){var E=n[u];return!!E}),m.length===0},q=function(n){return{type:"dayjs",value:n}},be=function(n){return ie()(n.value)},_e=function(n){return ie().isDayjs(n)?q(n):k.isUploadFile(n)?n.serialize():n},pe=function(n){return(n==null?void 0:n.type)==="dayjs"?be(n):(n==null?void 0:n.type)==="UploadFile"?new k(n.value.id,n.value.uid,n.value.url,n.value.name):n},oe=function(n){var m=n.children,u=n.submitting,E=n.onFinish,d=n.readonly,b=i()(n,se);if(!b.name)throw new Error("Form\u7EC4\u4EF6\u5FC5\u987B\u6307\u5B9Aname\u5C5E\u6027");var L=function(){var F=c()(t()().mark(function S(j){return t()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(!u){T.next=2;break}return T.abrupt("return");case 2:if(!E){T.next=5;break}return T.next=5,E(j);case 5:case"end":return T.stop()}},S)}));return function(j){return F.apply(this,arguments)}}();return(0,a.jsx)(x.ZP,{theme:{token:{colorTextDisabled:d?"#000":"rgba(0, 0, 0, 0.25)"}},children:(0,a.jsx)(g.Z,r()(r()({onFinish:L},b),{},{disabled:d,children:m}))})};oe.List=g.Z.List,oe.ErrorList=g.Z.ErrorList,oe.Item=g.Z.Item,oe.useForm=g.Z.useForm,oe.useWatch=g.Z.useWatch;var Pe=function(n){var m=n.children,u=n.form,E=n.draft,d=n.initFn,b=n.saveFn,L=i()(n,Y),F=(0,B.useState)(!1),S=l()(F,2),j=S[0],$=S[1],T=(0,B.useState)({}),Z=l()(T,2),ee=Z[0],h=Z[1],z=C.ZP.useMessage(),O=l()(z,2),W=O[0],N=O[1];(0,B.useEffect)(function(){var K=function(){var ae=c()(t()().mark(function V(){var s,P,p,v,w,H;return t()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(typeof d!="function"){G.next=5;break}return G.next=3,d(u.__INTERNAL__.name);case 3:if(s=G.sent,s.status&&s.data){for(P=0,p=Object.entries(s.data);P<p.length;P++)v=l()(p[P],2),w=v[0],H=v[1],Array.isArray(H)?s.data[w]=H.map(function(ne){return pe(ne)}):s.data[w]=pe(H);h(s.data),$(!0)}case 5:case"end":return G.stop()}},V)}));return function(){return ae.apply(this,arguments)}}();E&&K()},[]);var U=function(){var K=c()(t()().mark(function ae(){var V,s,P,p,v,w,H,D;return t()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!J(u.getFieldsValue())){ne.next=3;break}return W.error("\u8868\u5355\u4E3A\u7A7A\uFF0C\u6CA1\u6709\u5185\u5BB9\u53EF\u4EE5\u6682\u5B58"),ne.abrupt("return");case 3:for(V=u.__INTERNAL__.name,s=u.getFieldsValue(),P=0,p=Object.entries(s);P<p.length;P++)v=l()(p[P],2),w=v[0],H=v[1],Array.isArray(H)?s[w]=H.map(function(en){return _e(en)}):s[w]=_e(H);if(typeof b!="function"){ne.next=11;break}return ne.next=9,b({form_name:V,form_data:s});case 9:D=ne.sent,D.status?W.success("\u6682\u5B58\u6210\u529F"):W.error(D.info);case 11:case"end":return ne.stop()}},ae)}));return function(){return K.apply(this,arguments)}}(),le=function(){u.setFieldsValue(ee),$(!1)};return(0,a.jsxs)(a.Fragment,{children:[N,(0,a.jsxs)(g.Z.Item,r()(r()({},L),{},{children:[E&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.ZP,{type:"dashed",htmlType:"button",onClick:U,children:"\u6682\u5B58"}),(0,a.jsx)(Q.Z,{title:"\u63D0\u793A",open:j,onOk:le,onCancel:function(){return $(!1)},children:(0,a.jsx)("p",{children:"\u662F\u5426\u8981\u6062\u590D\u6682\u5B58\u7684\u8868\u5355\u6570\u636E\uFF1F"})})]}),m]}))]})};oe.Buttons=Pe;var De=e(19632),ge=e.n(De),Oe=e(56853),Fe=e(21054),Ee=e(10911),Ce=e(74956),xe=e(44559),Ie=["tips","value","onChange","uploadTo","hashCheck","listType","ifDrag"],Ae=Ee.Z.Dragger,Me=function(){var _=c()(t()().mark(function n(m){var u;return t()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,e(84805)("./".concat(m));case 2:return u=d.sent,d.abrupt("return",u.default);case 4:case"end":return d.stop()}},n)}));return function(m){return _.apply(this,arguments)}}(),ye=function(n){var m=n.tips,u=n.value,E=n.onChange,d=E===void 0?function(){}:E,b=n.uploadTo,L=b===void 0?"server":b,F=n.hashCheck,S=F===void 0?!0:F,j=n.listType,$=j===void 0?"picture":j,T=n.ifDrag,Z=i()(n,Ie),ee=r()({listType:$},Z),h=u==null?void 0:u.map(function(V){var s=V.toObject();return Object.assign(s,{uid:s.uid||s.id})}),z=C.ZP.useMessage(),O=l()(z,2),W=O[0],N=O[1],U=function(){var V=c()(t()().mark(function s(P){var p,v,w;return t()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(p={file:P,action:Z.action,hashId:""},!S){D.next=5;break}return D.next=4,(0,Ce.UM)(P);case 4:p.hashId=D.sent;case 5:return D.next=7,Me(L);case 7:return v=D.sent,D.next=10,v.upload(p.file,p.action,p.hashId);case 10:return w=D.sent,D.abrupt("return",w);case 12:case"end":return D.stop()}},s)}));return function(P){return V.apply(this,arguments)}}(),le=function(s,P,p,v){var w=h||[],H={id:s,uid:P,url:p,name:v},D=[].concat(ge()(w),[H]);Z.maxCount===1?D=D.slice(-1):D=D.slice(0,Z.maxCount),d(D.map(function(G){return new k(G.id,G.uid,G.url,G.name)}))},K=function(s){var P;d(h==null||(P=h.filter(function(p){return p.id!==s}))===null||P===void 0?void 0:P.map(function(p){return new k(p.id,p.uid,p.url,p.name)}))},ae=function(){var s=r()(r()({},ee),{},{onChange:function(p){var v=p.file;if(v.status==="done"&&(v.response.status?le(v.response.file_id,v.uid,v.response.url,v.response.title):parseInt(v.response.status)===0&&W.error(v.response.info)),v.status==="removed"){var w;K((v==null?void 0:v.id)||(v==null||(w=v.response)===null||w===void 0?void 0:w.file_id))}},defaultFileList:h,showUploadList:{showDownloadIcon:!0},onPreview:function(p){var v;window.open((p==null?void 0:p.url)||(p==null||(v=p.response)===null||v===void 0?void 0:v.url),"_blank")},customRequest:function(p){U(p.file).then(function(v){xe.Z.handleError.hasError(v)?p.onError(new Error(xe.Z.handleError.extractError(v))):p.onSuccess(v)})}});return(0,a.jsxs)(a.Fragment,{children:[N,T?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(Ae,r()(r()({},s),{},{children:s!=null&&s.children?s==null?void 0:s.children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(Oe.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u8FDB\u884C\u4E0A\u4F20"}),(0,a.jsx)("span",{className:"drag-drop-upload-tips",children:m})]})}))}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ee.Z,r()(r()({},s),{},{children:s!=null&&s.children?s==null?void 0:s.children:(0,a.jsx)(f.ZP,{icon:(0,a.jsx)(Fe.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})})),(0,a.jsx)("span",{style:{color:"#c9c6c6"},children:m})]})]})};return(0,B.useEffect)(function(){S&&(0,Ce.ZP)()},[]),(0,a.jsx)(a.Fragment,{children:ae()})},Te=e(24679),Ue=e(71230),Re=["onChange","value"],Be=function(n){var m=n.onChange,u=n.value,E=i()(n,Re);return(0,a.jsx)(ye,r()({value:u,onChange:m},E))},Le=Be,je=e(50719),Se=["onChange"],We=function(n){var m=n.onChange,u=i()(n,Se),E=function(b){n.onChange&&n.onChange(b.target.value)};return(0,a.jsx)(je.Z,r()({onChange:E},u))},$e=We,Ze=e(88385),Ke=["onChange"],we=function(n){var m=n.onChange,u=i()(n,Ke),E=function(b){n.onChange&&n.onChange(b)};return(0,a.jsx)(Ze.Z,r()({bordered:!1,onChange:E},u))},ze=we,Ne=["onChange","className"],ke=function(n){var m=window.getComputedStyle(n),u=m.getPropertyValue("box-sizing")||m.getPropertyValue("-moz-box-sizing")||m.getPropertyValue("-webkit-box-sizing"),E=parseFloat(m.getPropertyValue("padding-bottom"))+parseFloat(m.getPropertyValue("padding-top")),d=parseFloat(m.getPropertyValue("border-bottom-width"))+parseFloat(m.getPropertyValue("border-top-width")),b=n.scrollHeight;if(u==="border-box")return b+=d;if(u==="content-box")return b-=E},Ve=function(n){var m=n.onChange,u=n.className,E=u===void 0?"":u,d=i()(n,Ne),b=(0,B.useState)(!1),L=l()(b,2),F=L[0],S=L[1],j=x.ZP.useConfig(),$=j.componentDisabled,T=(0,B.useCallback)(function(h){d.autoSize&&$&&h&&h.resizableTextArea&&h.resizableTextArea.textArea&&(h.resizableTextArea.textArea.style.height="".concat(ke(h.resizableTextArea.textArea),"px"))},[$]),Z=function(z){n.onChange&&n.onChange(z.target.value)},ee=d.value||d.defaultValue||"";return(0,a.jsxs)("div",{className:"component_editable_table_text_area",children:[(0,a.jsx)(je.Z.TextArea,r()({ref:T,className:"component_editable_table_text_area_input ".concat(F?"focus":""," ").concat(E),onChange:Z,onFocus:function(){S(!0)},onBlur:function(){S(!1)}},d)),F&&d.maxLength?(0,a.jsx)("div",{className:"component_editable_table_text_area_length",children:"".concat(ee.length," / ").concat(d.maxLength)}):""]})},He=Ve,Ge=["children","dataIndex","onChange","component","editable","calc","customComponentProps"],Je={Input:$e,InputNumber:ze,TextArea:He,Upload:Le},Qe=(0,B.memo)(function(_){var n=_.children,m=_.dataIndex,u=_.onChange,E=_.component,d=E===void 0?"Input":E,b=_.editable,L=_.calc,F=_.customComponentProps,S=F===void 0?{}:F,j=i()(_,Ge);if(L)return(0,a.jsx)("td",r()(r()({},j),{},{children:L(j.record)}));var $=r()(te()(te()({},d==="Upload"?"value":"defaultValue",(j==null?void 0:j.record)&&(j==null?void 0:j.record[m])),"onChange",u),S);return(0,a.jsx)("td",r()(r()({},j),{},{children:b?B.createElement(Je[d],$):n}))}),Xe=(0,B.forwardRef)(function(_,n){var m=_.value,u=m===void 0?[]:m,E=_.columns,d=_.onChange,b=_.summary,L=_.canUpdateNum,F=L===void 0?!0:L,S=x.ZP.useConfig(),j=S.componentDisabled;(0,B.useImperativeHandle)(n,function(){return{addRow:ee,deleteRow:Z}});var $=(0,B.useRef)(u);$.current=u;var T=E.map(function(h){return r()(r()({},h),{},{onCell:function(O){return{record:O,dataIndex:h.dataIndex,title:h.title,component:h==null?void 0:h.component,editable:h.editable===void 0?!0:h.editable,calc:h.calc,customComponentProps:typeof h.customComponentPropsFn=="function"?h.customComponentPropsFn(O):{},onChange:function(N){d&&d(u.map(function(U,le){return U.key===O.key&&(U[h.dataIndex]=N),U}))}}}})}),Z=function(z){d&&d(u.filter(function(O){return O.key!==z}))},ee=function(){var z,O=0,W=(z=$.current)!==null&&z!==void 0?z:[];W.forEach(function(U){U.key>O&&(O=U.key)});var N={};E.forEach(function(U){U.editable===!0&&(N[U.dataIndex]="")}),N.key=O+1,d&&d([].concat(ge()(W),[N]))};return!j&&F&&F!=="add_only"&&T.push({title:"\u64CD\u4F5C",dataIndex:"operation",editable:!1,width:"40px",render:function(z,O){return(0,a.jsx)(ve,{type:"primary",danger:!0,confirm:{title:"\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"},onClick:function(){return Z(O.key)},children:"\u5220\u9664"})}}),(0,a.jsx)(Te.Z,r()(r()({pagination:!1,rowClassName:"budget-td",components:{body:{cell:Qe}},summary:b},!j&&F&&F!=="delete_only"?{footer:function(){return(0,a.jsx)(Ue.Z,{justify:"center",children:(0,a.jsx)(ve,{type:"primary",onClick:ee,children:"\u65B0\u589E"})})}}:{}),{},{dataSource:u,columns:T,bordered:!0}))}),Ye=e(76306),qe=["children","confirm"],ve=function(n){var m=n.children,u=n.confirm,E=i()(n,qe),d=(0,B.useState)(!1),b=l()(d,2),L=b[0],F=b[1],S=(0,B.useState)(!1),j=l()(S,2),$=j[0],T=j[1],Z=(0,B.useRef)(!1),ee=function(W){u||h(W)},h=function(){var O=c()(t()().mark(function W(N){var U;return t()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!(!Z.current&&E.onClick)){K.next=9;break}return Z.current=!0,U=setTimeout(function(){F(!0),T(!0)},300),K.next=5,E.onClick();case 5:clearTimeout(U),F(!1),T(!1),Z.current=!1;case 9:case"end":return K.stop()}},W)}));return function(N){return O.apply(this,arguments)}}(),z=function(W){var N=W.children,U=function(){var le=c()(t()().mark(function K(ae){return t()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,h(ae);case 2:case"end":return s.stop()}},K)}));return function(ae){return le.apply(this,arguments)}}();return u&&!L?(0,a.jsx)(Ye.Z,{title:u==null?void 0:u.title,description:u==null?void 0:u.description,onConfirm:U,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:N}):N};return(0,a.jsx)(z,{children:(0,a.jsx)(f.ZP,r()(r()({loading:L,disabled:$},E),{},{onClick:ee,children:m}))})}},84805:function(re,I,e){var A={"./cos":[13552,552],"./cos.ts":[13552,552],"./oss":[80503,503],"./oss.ts":[80503,503],"./server":[93928,928],"./server.ts":[93928,928],"./tos":[20311,311],"./tos.ts":[20311,311]};function l(R){if(!e.o(A,R))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+R+"'");throw t.code="MODULE_NOT_FOUND",t});var r=A[R],M=r[0];return e.e(r[1]).then(function(){return e(M)})}l.keys=function(){return Object.keys(A)},l.id=84805,re.exports=l}}]);
