"use strict";(self.webpackChunk_quansitech_pallas_pc=self.webpackChunk_quansitech_pallas_pc||[]).push([[433],{64699:function(me,A,e){e.r(A);var z=e(15009),i=e.n(z),W=e(99289),u=e.n(W),Q=e(5574),h=e.n(Q),j=e(36818),N=e(47527),re=e(34176),G=e(70416),te=e(78957),g=e(89779),X=e(67294),r=e(85893);A.default=function(){var se=(0,X.useState)(!1),Y=h()(se,2),V=Y[0],Z=Y[1],ie=j.l.useForm(),ue=h()(ie,1),k=ue[0],le=function(){var C=u()(i()().mark(function o(a){return i()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return console.log(a),Z(!0),E.next=4,fetch("/api/submit",{method:"POST",body:JSON.stringify(a)});case 4:Z(!1);case 5:case"end":return E.stop()}},o)}));return function(a){return C.apply(this,arguments)}}(),oe=function(){var C=u()(i()().mark(function o(a){var P,E;return i()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return console.log(a),y.next=3,fetch("/api/Staging?name=".concat(a));case 3:return P=y.sent,y.next=6,P.json();case 6:return E=y.sent,y.abrupt("return",E);case 8:case"end":return y.stop()}},o)}));return function(a){return C.apply(this,arguments)}}(),$=function(){var C=u()(i()().mark(function o(a){var P;return i()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return console.log(a.form_name,a.form_data),v.next=3,fetch("/api/Staging",{method:"POST",body:JSON.stringify(a)});case 3:return P=v.sent,v.next=6,P.json();case 6:return v.abrupt("return",v.sent);case 7:case"end":return v.stop()}},o)}));return function(a){return C.apply(this,arguments)}}();return(0,r.jsx)("div",{children:(0,r.jsxs)(j.l,{name:"assitanceListForm",form:k,labelWrap:!0,labelCol:{span:8},onFinish:le,submitting:V,children:[(0,r.jsx)(j.l.Item,{hidden:!0,name:"assistance_list_id",children:(0,r.jsx)(N.Z,{})}),(0,r.jsx)(j.l.Item,{name:"amount",label:"\u6551\u52A9\u91D1\u989D",rules:[{required:!0}],hasFeedback:!0,children:(0,r.jsx)(re.Z,{addonAfter:"\u5143/\u5E74",min:0,precision:2,controls:!1})}),(0,r.jsx)(j.l.Item,{name:"start_date",label:"\u5F00\u59CB\u65F6\u95F4",children:(0,r.jsx)(G.Z,{})}),(0,r.jsx)(j.l.Item,{name:"file",label:"\u6587\u4EF6",children:(0,r.jsx)(j.g,{action:"/api/upload"})}),(0,r.jsx)(j.l.Buttons,{draft:!0,form:k,initFn:oe,saveFn:$,children:(0,r.jsxs)(te.Z,{children:[(0,r.jsx)(g.ZP,{type:"primary",htmlType:"submit",loading:V,children:"\u786E\u5B9A"}),(0,r.jsx)(g.ZP,{onClick:function(){},children:"\u53D6\u6D88"})]})})]})})}},33198:function(me,A,e){e.r(A);var z=e(36818),i=e(67294),W=e(85893);A.default=function(){var u=function(h){console.log(h)};return(0,W.jsx)("div",{children:(0,W.jsx)(z.g,{action:"/api/upload",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"jpg",maxCount:1,onChange:u})})}},36818:function(me,A,e){e.d(A,{l:function(){return T},g:function(){return Oe}});var z=e(5574),i=e.n(z),W=e(97857),u=e.n(W),Q=e(15009),h=e.n(Q),j=e(99289),N=e.n(j),re=e(13769),G=e.n(re),te=e(28459),g=e(32744),X=e(10154),r=e(89779),se=e(41202),Y=e(27484),V=e.n(Y),Z=e(67294),ie=e(12444),ue=e.n(ie),k=e(72004),le=e.n(k),oe=e(9783),$=e.n(oe),C=function(){function f(n,d,s,m){ue()(this,f),$()(this,"id",void 0),$()(this,"uid",void 0),$()(this,"url",void 0),$()(this,"name",void 0),this.id=n,this.uid=d,this.url=s,this.name=m}return le()(f,[{key:"toObject",value:function(){return{id:this.id,uid:this.uid,url:this.url,name:this.name}}},{key:"serialize",value:function(){return{type:"UploadFile",value:this.toObject()}}}],[{key:"isUploadFile",value:function(d){return d instanceof f}}]),f}(),o=C,a=e(85893),P=["children","submitting","onFinish","readonly"],E=["children","form","draft","initFn","saveFn"],v=function(n){var d=Object.keys(n);return d=d.filter(function(s){var m=n[s];return!!m}),d.length===0},y=function(n){return console.log(n),{type:"dayjs",value:n}},_e=function(n){return V()(n.value)},he=function(n){return V().isDayjs(n)?y(n):o.isUploadFile(n)?n.serialize():n},ve=function(n){return(n==null?void 0:n.type)==="dayjs"?_e(n):(n==null?void 0:n.type)==="UploadFile"?new o(n.value.id,n.value.uid,n.value.url,n.value.name):n},T=function(n){var d=n.children,s=n.submitting,m=n.onFinish,M=n.readonly,p=G()(n,P);if(!p.name)throw new Error("Form\u7EC4\u4EF6\u5FC5\u987B\u6307\u5B9Aname\u5C5E\u6027");var H=function(){var U=N()(h()().mark(function x(I){return h()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!s){_.next=2;break}return _.abrupt("return");case 2:if(!m){_.next=5;break}return _.next=5,m(I);case 5:case"end":return _.stop()}},x)}));return function(I){return U.apply(this,arguments)}}();return(0,a.jsx)(te.ZP,{theme:{token:{colorTextDisabled:M?"#000":"rgba(0, 0, 0, 0.25)"}},children:(0,a.jsx)(g.Z,u()(u()({onFinish:H},p),{},{disabled:M,children:d}))})};T.List=g.Z.List,T.ErrorList=g.Z.ErrorList,T.Item=g.Z.Item,T.useForm=g.Z.useForm,T.useWatch=g.Z.useWatch;var je=function(n){var d=n.children,s=n.form,m=n.draft,M=n.initFn,p=n.saveFn,H=G()(n,E),U=(0,Z.useState)(!1),x=i()(U,2),I=x[0],K=x[1],_=(0,Z.useState)({}),w=i()(_,2),q=w[0],de=w[1],pe=X.ZP.useMessage(),ee=i()(pe,2),c=ee[0],ce=ee[1];(0,Z.useEffect)(function(){var t=function(){var ne=N()(h()().mark(function J(){var l,D,B,R,L,O;return h()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(typeof M!="function"){S.next=6;break}return S.next=3,M(s.__INTERNAL__.name);case 3:if(l=S.sent,console.log(l),l.status&&l.data){for(D=0,B=Object.entries(l.data);D<B.length;D++)R=i()(B[D],2),L=R[0],O=R[1],Array.isArray(O)?l.data[L]=O.map(function(F){return ve(F)}):l.data[L]=ve(O);de(l.data),K(!0)}case 6:case"end":return S.stop()}},J)}));return function(){return ne.apply(this,arguments)}}();m&&t()},[]);var fe=function(){var t=N()(h()().mark(function ne(){var J,l,D,B,R,L,O,ae;return h()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!v(s.getFieldsValue())){F.next=3;break}return c.error("\u8868\u5355\u4E3A\u7A7A\uFF0C\u6CA1\u6709\u5185\u5BB9\u53EF\u4EE5\u6682\u5B58"),F.abrupt("return");case 3:for(J=s.__INTERNAL__.name,l=s.getFieldsValue(),D=0,B=Object.entries(l);D<B.length;D++)R=i()(B[D],2),L=R[0],O=R[1],Array.isArray(O)?l[L]=O.map(function(Ce){return he(Ce)}):l[L]=he(O);if(typeof p!="function"){F.next=11;break}return F.next=9,p({form_name:J,form_data:l});case 9:ae=F.sent,ae.status?c.success("\u6682\u5B58\u6210\u529F"):c.error(ae.info);case 11:case"end":return F.stop()}},ne)}));return function(){return t.apply(this,arguments)}}(),b=function(){s.setFieldsValue(q),K(!1)};return(0,a.jsxs)(a.Fragment,{children:[ce,(0,a.jsxs)(g.Z.Item,u()(u()({},H),{},{children:[m&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.ZP,{type:"dashed",htmlType:"button",onClick:fe,children:"\u6682\u5B58"}),(0,a.jsx)(se.Z,{title:"\u63D0\u793A",open:I,onOk:b,onCancel:function(){return K(!1)},children:(0,a.jsx)("p",{children:"\u662F\u5426\u8981\u6062\u590D\u6682\u5B58\u7684\u8868\u5355\u6570\u636E\uFF1F"})})]}),d]}))]})};T.Buttons=je;var ge=e(19632),Ee=e.n(ge),ye=e(21054),Fe=e(86919),De=["tips","value","onChange"],Oe=function(n){var d=n.tips,s=n.value,m=n.onChange,M=m===void 0?function(){}:m,p=G()(n,De),H={action:p.action,accept:p.accept,listType:"picture",maxCount:p.maxCount},U=s==null?void 0:s.map(function(q){return q.toObject()}),x=X.ZP.useMessage(),I=i()(x,2),K=I[0],_=I[1],w=function(){var de=u()(u()({},H),{},{onChange:function(ee){var c=ee.file;if(c.status==="done")if(c.response.status===1){var ce=U||[],fe={id:c.response.file_id,uid:c.uid,url:c.response.url,name:c.response.title},b=[].concat(Ee()(ce),[fe]);p.maxCount===1?b=b.slice(-1):b=b.slice(0,p.maxCount),M(b.map(function(t){return new o(t.id,t.uid,t.url,t.name)}))}else K.error(c.response.info);c.status==="removed"&&M(U.filter(function(t){return t.id!==c.id}).map(function(t){return new o(t.id,t.uid,t.url,t.name)}))},defaultFileList:U,showUploadList:{showDownloadIcon:!0}});return(0,a.jsxs)(a.Fragment,{children:[_,(0,a.jsx)(Fe.Z,u()(u()({},de),{},{children:(0,a.jsx)(r.ZP,{icon:(0,a.jsx)(ye.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})})),(0,a.jsx)("span",{style:{color:"#c9c6c6"},children:d})]})};return(0,a.jsx)(w,{})}}}]);
