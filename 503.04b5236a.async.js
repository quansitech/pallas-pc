"use strict";(self.webpackChunk_quansitech_pallas_pc=self.webpackChunk_quansitech_pallas_pc||[]).push([[503],{80503:function(v,o,a){a.r(o);var D=a(15009),d=a.n(D),j=a(97857),m=a.n(j),P=a(99289),y=a.n(P),u=a(44559);o.default={upload:function(){var M=y()(d()().mark(function i(s,c,b){var n,r,l,h,_,E,p,t,f,O;return d()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new FormData,r=new URLSearchParams(c),b&&r.append("hash_id",b),l=s.type,l){e.next=8;break}return e.next=7,u.Z.getFileType.start(s);case 7:l=e.sent;case 8:return r.append("vendor_type","aliyun_oss"),r.append("file_type",l),r.append("title",s.name),e.next=13,fetch(decodeURIComponent(r.toString()));case 13:return h=e.sent,e.next=16,h.json();case 16:if(_=e.sent,parseInt(_.status)!==2){e.next=19;break}return e.abrupt("return",{file_id:_.file_id,url:_.file_url,status:parseInt(_.status)});case 19:if(!u.Z.handleError.hasError(_)){e.next=21;break}return e.abrupt("return",_);case 21:E=_.oss_meta?JSON.parse(_.oss_meta):{},p=m()(m()({key:_.dir+u.Z.getSuffix(s.name),policy:_.policy,OSSAccessKeyId:_.accessid,success_action_status:"200",callback:_.callback,signature:_.signature},JSON.parse(_.callback_var)),E);for(t in p)n.append(t,p[t]);return n.append("file",s),e.next=27,fetch(_.host,{method:"POST",body:n});case 27:return f=e.sent,e.next=30,f.json();case 30:return O=e.sent,e.abrupt("return",O);case 32:case"end":return e.stop()}},i)}));function k(i,s,c){return M.apply(this,arguments)}return k}()}}}]);
