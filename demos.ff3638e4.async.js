(self.webpackChunk_quansitech_pallas_pc=self.webpackChunk_quansitech_pallas_pc||[]).push([[433],{43752:function(te,O,n){"use strict";n.r(O);var P=n(56413),d=n(24679),I=n(67294),t=n(85893),z={round:function(M,U){var k=Math.pow(10,U);return Math.round(M*k)/k}};O.default=function(){var c=[{title:"\u5F00\u652F\u9879",dataIndex:"budget_name"},{title:"\u5355\u4EF7",component:"InputNumber",dataIndex:"budget_unit_price"},{title:"\u6570\u91CF",component:"InputNumber",customComponentPropsFn:function(h){if((h==null?void 0:h.key)===1)return{max:10}},dataIndex:"budget_quantity"},{title:"\u8FD9\u9879\u4E0D\u53EF\u4FEE\u6539",component:"Input",dataIndex:"no_update",editable:!1},{title:"\u5C0F\u8BA1",dataIndex:"budget_subtotal",calc:function(h){var K,C;return z.round(parseFloat((K=h==null?void 0:h.budget_unit_price)!==null&&K!==void 0?K:0)*parseFloat((C=h==null?void 0:h.budget_quantity)!==null&&C!==void 0?C:0),2)}},{title:"\u5907\u6CE8",dataIndex:"budget_remark"}],M=[{key:1,budget_name:"\u529E\u516C\u7528\u54C1",budget_unit_price:2,budget_quantity:3,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"},{key:2,budget_name:"\u7ECF\u8D39",budget_unit_price:3,budget_quantity:4,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"}],U=function(h){var K=0;return h.forEach(function(C){var Y,g;K+=z.round(((Y=C==null?void 0:C.budget_quantity)!==null&&Y!==void 0?Y:0)*((g=C==null?void 0:C.budget_unit_price)!==null&&g!==void 0?g:0),2)}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(d.Z.Summary.Row,{children:[(0,t.jsx)(d.Z.Summary.Cell,{index:0,colSpan:4,children:"\u5408\u8BA1"}),(0,t.jsx)(d.Z.Summary.Cell,{index:1,children:(0,t.jsx)("span",{children:K})})]})})};return(0,t.jsx)(P.l0,{name:"editableEditable",initialValues:{data:M},children:(0,t.jsx)(P.l0.Item,{name:"data",children:(0,t.jsx)(P.r8,{columns:c,summary:U,canUpdateNum:!1,onChange:function(h){console.log(h)}})})})}},64699:function(te,O,n){"use strict";n.r(O);var P=n(15009),d=n.n(P),I=n(99289),t=n.n(I),z=n(5574),c=n.n(z),M=n(56413),U=n(50719),k=n(88385),h=n(97019),K=n(78957),C=n(15867),Y=n(67294),g=n(85893);O.default=function(){var de=(0,Y.useState)(!1),se=c()(de,2),ie=se[0],Z=se[1],ce=M.l0.useForm(),fe=c()(ce,1),le=fe[0],me=function(){var w=t()(d()().mark(function B(a){return d()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return Z(!0),V.next=3,fetch("/api/submit",{method:"POST",body:JSON.stringify(a)});case 3:Z(!1);case 4:case"end":return V.stop()}},B)}));return function(a){return w.apply(this,arguments)}}(),he=function(){var w=t()(d()().mark(function B(a){var q,V;return d()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,fetch("/api/Staging?name=".concat(a));case 2:return q=G.sent,G.next=5,q.json();case 5:return V=G.sent,G.abrupt("return",V);case 7:case"end":return G.stop()}},B)}));return function(a){return w.apply(this,arguments)}}(),re=function(){var w=t()(d()().mark(function B(a){var q;return d()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,fetch("/api/Staging",{method:"POST",body:JSON.stringify(a)});case 2:return q=N.sent,N.next=5,q.json();case 5:return N.abrupt("return",N.sent);case 6:case"end":return N.stop()}},B)}));return function(a){return w.apply(this,arguments)}}();return(0,g.jsx)("div",{children:(0,g.jsxs)(M.l0,{name:"assitanceListForm",form:le,labelWrap:!0,labelCol:{span:8},onFinish:me,submitting:ie,children:[(0,g.jsx)(M.l0.Item,{hidden:!0,name:"assistance_list_id",children:(0,g.jsx)(U.Z,{})}),(0,g.jsx)(M.l0.Item,{name:"amount",label:"\u6551\u52A9\u91D1\u989D",rules:[{required:!0}],hasFeedback:!0,children:(0,g.jsx)(k.Z,{addonAfter:"\u5143/\u5E74",min:0,precision:2,controls:!1})}),(0,g.jsx)(M.l0.Item,{name:"start_date",label:"\u5F00\u59CB\u65F6\u95F4",children:(0,g.jsx)(h.Z,{})}),(0,g.jsx)(M.l0.Item,{name:"file",label:"\u6587\u4EF6",children:(0,g.jsx)(M.gq,{action:"/api/upload"})}),(0,g.jsx)(M.l0.Buttons,{draft:!0,form:le,initFn:he,saveFn:re,children:(0,g.jsxs)(K.Z,{children:[(0,g.jsx)(C.ZP,{type:"primary",htmlType:"submit",loading:ie,children:"\u786E\u5B9A"}),(0,g.jsx)(C.ZP,{onClick:function(){},children:"\u53D6\u6D88"})]})})]})})}},35352:function(te,O,n){"use strict";n.r(O);var P=n(56413),d=n(67294),I=n(85893);O.default=function(){var t=function(c){};return(0,I.jsx)("div",{children:(0,I.jsx)(P.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",maxCount:1,onChange:t,ifDrag:!0})})}},33198:function(te,O,n){"use strict";n.r(O);var P=n(56413),d=n(67294),I=n(85893);O.default=function(){var t=function(c){};return(0,I.jsx)("div",{children:(0,I.jsx)(P.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",maxCount:1,onChange:t})})}},56413:function(te,O,n){"use strict";n.d(O,{zx:function(){return ve},r8:function(){return ze},l0:function(){return ne},gq:function(){return Ie}});var P=n(5574),d=n.n(P),I=n(97857),t=n.n(I),z=n(15009),c=n.n(z),M=n(99289),U=n.n(M),k=n(13769),h=n.n(k),K=n(28459),C=n(87174),Y=n(10154),g=n(15867),de=n(27911),se=n(27484),ie=n.n(se),Z=n(67294),ce=n(12444),fe=n.n(ce),le=n(72004),me=n.n(le),he=n(9783),re=n.n(he),w=function(){function o(e,i,r,u){fe()(this,o),re()(this,"id",void 0),re()(this,"uid",void 0),re()(this,"url",void 0),re()(this,"name",void 0),this.id=e,this.uid=i,this.url=r,this.name=u}return me()(o,[{key:"toObject",value:function(){return{id:this.id,uid:this.uid,url:this.url,name:this.name}}},{key:"serialize",value:function(){return{type:"UploadFile",value:this.toObject()}}}],[{key:"isUploadFile",value:function(i){return i instanceof o}}]),o}(),B=w,a=n(85893),q=["children","submitting","onFinish","readonly"],V=["children","form","draft","initFn","saveFn"],N=function(e){var i=Object.keys(e);return i=i.filter(function(r){var u=e[r];return!!u}),i.length===0},G=function(e){return{type:"dayjs",value:e}},_e=function(e){return ie()(e.value)},pe=function(e){return ie().isDayjs(e)?G(e):B.isUploadFile(e)?e.serialize():e},ge=function(e){return(e==null?void 0:e.type)==="dayjs"?_e(e):(e==null?void 0:e.type)==="UploadFile"?new B(e.value.id,e.value.uid,e.value.url,e.value.name):e},ne=function(e){var i=e.children,r=e.submitting,u=e.onFinish,v=e.readonly,y=h()(e,q);if(!y.name)throw new Error("Form\u7EC4\u4EF6\u5FC5\u987B\u6307\u5B9Aname\u5C5E\u6027");var T=function(){var A=U()(c()().mark(function b(p){return c()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!r){x.next=2;break}return x.abrupt("return");case 2:if(!u){x.next=5;break}return x.next=5,u(p);case 5:case"end":return x.stop()}},b)}));return function(p){return A.apply(this,arguments)}}();return(0,a.jsx)(K.ZP,{theme:{token:{colorTextDisabled:v?"#000":"rgba(0, 0, 0, 0.25)"}},children:(0,a.jsx)(C.Z,t()(t()({onFinish:T},y),{},{disabled:v,children:i}))})};ne.List=C.Z.List,ne.ErrorList=C.Z.ErrorList,ne.Item=C.Z.Item,ne.useForm=C.Z.useForm,ne.useWatch=C.Z.useWatch;var je=function(e){var i=e.children,r=e.form,u=e.draft,v=e.initFn,y=e.saveFn,T=h()(e,V),A=(0,Z.useState)(!1),b=d()(A,2),p=b[0],$=b[1],x=(0,Z.useState)({}),l=d()(x,2),R=l[0],_=l[1],H=Y.ZP.useMessage(),D=d()(H,2),F=D[0],X=D[1];(0,Z.useEffect)(function(){var j=function(){var S=U()(c()().mark(function L(){var s,f,W,J,m,E;return c()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(typeof v!="function"){ae.next=5;break}return ae.next=3,v(r.__INTERNAL__.name);case 3:if(s=ae.sent,s.status&&s.data){for(f=0,W=Object.entries(s.data);f<W.length;f++)J=d()(W[f],2),m=J[0],E=J[1],Array.isArray(E)?s.data[m]=E.map(function(Q){return ge(Q)}):s.data[m]=ge(E);_(s.data),$(!0)}case 5:case"end":return ae.stop()}},L)}));return function(){return S.apply(this,arguments)}}();u&&j()},[]);var ee=function(){var j=U()(c()().mark(function S(){var L,s,f,W,J,m,E,oe;return c()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!N(r.getFieldsValue())){Q.next=3;break}return F.error("\u8868\u5355\u4E3A\u7A7A\uFF0C\u6CA1\u6709\u5185\u5BB9\u53EF\u4EE5\u6682\u5B58"),Q.abrupt("return");case 3:for(L=r.__INTERNAL__.name,s=r.getFieldsValue(),f=0,W=Object.entries(s);f<W.length;f++)J=d()(W[f],2),m=J[0],E=J[1],Array.isArray(E)?s[m]=E.map(function(Ge){return pe(Ge)}):s[m]=pe(E);if(typeof y!="function"){Q.next=11;break}return Q.next=9,y({form_name:L,form_data:s});case 9:oe=Q.sent,oe.status?F.success("\u6682\u5B58\u6210\u529F"):F.error(oe.info);case 11:case"end":return Q.stop()}},S)}));return function(){return j.apply(this,arguments)}}(),ue=function(){r.setFieldsValue(R),$(!1)};return(0,a.jsxs)(a.Fragment,{children:[X,(0,a.jsxs)(C.Z.Item,t()(t()({},T),{},{children:[u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.ZP,{type:"dashed",htmlType:"button",onClick:ee,children:"\u6682\u5B58"}),(0,a.jsx)(de.Z,{title:"\u63D0\u793A",open:p,onOk:ue,onCancel:function(){return $(!1)},children:(0,a.jsx)("p",{children:"\u662F\u5426\u8981\u6062\u590D\u6682\u5B58\u7684\u8868\u5355\u6570\u636E\uFF1F"})})]}),i]}))]})};ne.Buttons=je;var De=n(19632),Ce=n.n(De),xe=n(56853),Fe=n(21054),Ee=n(10911),ye=n(74956),Pe=["tips","value","onChange","uploadTo","hashCheck","listType","ifDrag"],be=Ee.Z.Dragger,Oe=function(){var o=U()(c()().mark(function e(i){var r;return c()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,n(84805)("./".concat(i));case 2:return r=v.sent,v.abrupt("return",r.default);case 4:case"end":return v.stop()}},e)}));return function(i){return o.apply(this,arguments)}}(),Ie=function(e){var i=e.tips,r=e.value,u=e.onChange,v=u===void 0?function(){}:u,y=e.uploadTo,T=y===void 0?"server":y,A=e.hashCheck,b=A===void 0?!0:A,p=e.listType,$=p===void 0?"picture":p,x=e.ifDrag,l=h()(e,Pe),R=t()({listType:$},l),_=r==null?void 0:r.map(function(j){return j.toObject()}),H=Y.ZP.useMessage(),D=d()(H,2),F=D[0],X=D[1],ee=function(){var j=U()(c()().mark(function S(L){var s,f,W;return c()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(s={file:L,action:l.action,hashId:""},!b){m.next=5;break}return m.next=4,(0,ye.UM)(L);case 4:s.hashId=m.sent;case 5:return m.next=7,Oe(T);case 7:return f=m.sent,m.next=10,f.upload(s.file,s.action,s.hashId);case 10:return W=m.sent,m.abrupt("return",W);case 12:case"end":return m.stop()}},S)}));return function(L){return j.apply(this,arguments)}}(),ue=function(){var S=t()(t()({},R),{},{onChange:function(s){var f=s.file;if(f.status==="done")if(f.response.status){var W=_||[],J={id:f.response.file_id,uid:f.uid,url:f.response.url,name:f.response.title},m=[].concat(Ce()(W),[J]);l.maxCount===1?m=m.slice(-1):m=m.slice(0,l.maxCount),v(m.map(function(E){return new B(E.id,E.uid,E.url,E.name)}))}else f.response.status===0&&F.error(f.response.info);f.status==="removed"&&v(_.filter(function(E){return E.id!==f.id}).map(function(E){return new B(E.id,E.uid,E.url,E.name)}))},defaultFileList:_,showUploadList:{showDownloadIcon:!0},customRequest:function(s){ee(s.file).then(function(f){s.onSuccess(f)})}});return(0,a.jsxs)(a.Fragment,{children:[X,x?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(be,t()(t()({},S),{},{children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(xe.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u8FDB\u884C\u4E0A\u4F20"}),(0,a.jsx)("span",{className:"drag-drop-upload-tips",children:i})]}))}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ee.Z,t()(t()({},S),{},{children:(0,a.jsx)(g.ZP,{icon:(0,a.jsx)(Fe.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})})),(0,a.jsx)("span",{style:{color:"#c9c6c6"},children:i})]})]})};return(0,Z.useEffect)(function(){b&&(0,ye.ZP)()},[]),(0,a.jsx)(a.Fragment,{children:ue()})},Me=n(24679),Te=n(71230),Ae=n(50719),Ue=["onChange"],Be=function(e){var i=e.onChange,r=h()(e,Ue),u=function(y){e.onChange&&e.onChange(y.target.value)};return(0,a.jsx)(Ae.Z,t()({onChange:u},r))},Re=Be,Se=n(88385),Ze=["onChange"],$e=function(e){var i=e.onChange,r=h()(e,Ze),u=function(y){e.onChange&&e.onChange(y)};return(0,a.jsx)(Se.Z,t()({bordered:!1,onChange:u},r))},Le=$e,We=["children","dataIndex","onChange","component","editable","calc","customComponentProps"],Ke={Input:Re,InputNumber:Le},Ne=(0,Z.memo)(function(o){var e=o.children,i=o.dataIndex,r=o.onChange,u=o.component,v=u===void 0?"Input":u,y=o.editable,T=o.calc,A=o.customComponentProps,b=A===void 0?{}:A,p=h()(o,We);if(T)return(0,a.jsx)("td",t()(t()({},p),{},{children:T(p.record)}));var $=t()({defaultValue:(p==null?void 0:p.record)&&(p==null?void 0:p.record[i]),onChange:r},b);return(0,a.jsx)("td",t()(t()({},p),{},{children:y?Z.createElement(Ke[v],$):e}))}),ze=function(e){var i=e.value,r=e.columns,u=e.onChange,v=e.summary,y=e.canUpdateNum,T=y===void 0?!0:y,A=K.ZP.useConfig(),b=A.componentDisabled,p=r.map(function(l){return t()(t()({},l),{},{onCell:function(_){return{record:_,dataIndex:l.dataIndex,title:l.title,component:l==null?void 0:l.component,editable:l.editable===void 0?!0:l.editable,calc:l.calc,customComponentProps:typeof l.customComponentPropsFn=="function"?l.customComponentPropsFn(_):{},onChange:function(D){u&&u(i.map(function(F,X){return F.key===_.key&&(F[l.dataIndex]=D),F}))}}}})}),$=function(R){return function(){u&&u(i.filter(function(_){return _.key!==R}))}},x=function(){var R=0,_=i!=null?i:[];_.forEach(function(D){D.key>R&&(R=D.key)});var H={};r.forEach(function(D){D.editable===!0&&(H[D.dataIndex]="")}),H.key=R+1,u&&u([].concat(Ce()(_),[H]))};return!b&&T&&p.push({title:"\u64CD\u4F5C",dataIndex:"operation",editable:!1,width:"40px",render:function(R,_){return(0,a.jsx)(ve,{type:"primary",danger:!0,confirm:{title:"\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"},onClick:$(_.key),children:"\u5220\u9664"})}}),(0,a.jsx)(Me.Z,t()(t()({pagination:!1,rowClassName:"budget-td",components:{body:{cell:Ne}},summary:v},!b&&T?{footer:function(){return(0,a.jsx)(Te.Z,{justify:"center",children:(0,a.jsx)(ve,{type:"primary",onClick:x,children:"\u65B0\u589E"})})}}:{}),{},{dataSource:i,columns:p,bordered:!0}))},ke=n(76306),Ve=["children","confirm"],ve=function(e){var i=e.children,r=e.confirm,u=h()(e,Ve),v=(0,Z.useState)(!1),y=d()(v,2),T=y[0],A=y[1],b=(0,Z.useState)(!1),p=d()(b,2),$=p[0],x=p[1],l=(0,Z.useRef)(!1),R=function(F){r||_(F)},_=function(){var D=U()(c()().mark(function F(X){var ee;return c()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!(!l.current&&u.onClick)){j.next=9;break}return l.current=!0,ee=setTimeout(function(){A(!0),x(!0)},300),j.next=5,u.onClick();case 5:clearTimeout(ee),A(!1),x(!1),l.current=!1;case 9:case"end":return j.stop()}},F)}));return function(X){return D.apply(this,arguments)}}(),H=function(F){var X=F.children,ee=function(){var ue=U()(c()().mark(function j(S){return c()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,_(S);case 2:case"end":return s.stop()}},j)}));return function(S){return ue.apply(this,arguments)}}();return r&&!T?(0,a.jsx)(ke.Z,{title:r==null?void 0:r.title,description:r==null?void 0:r.description,onConfirm:ee,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:X}):X};return(0,a.jsx)(H,{children:(0,a.jsx)(g.ZP,t()(t()({loading:T,disabled:$},u),{},{onClick:R,children:i}))})}},84805:function(te,O,n){var P={"./cos":[13552,552],"./cos.ts":[13552,552],"./oss":[80503,503],"./oss.ts":[80503,503],"./server":[93928,928],"./server.ts":[93928,928],"./tos":[20311,311],"./tos.ts":[20311,311]};function d(I){if(!n.o(P,I))return Promise.resolve().then(function(){var c=new Error("Cannot find module '"+I+"'");throw c.code="MODULE_NOT_FOUND",c});var t=P[I],z=t[0];return n.e(t[1]).then(function(){return n(z)})}d.keys=function(){return Object.keys(P)},d.id=84805,te.exports=d}}]);
