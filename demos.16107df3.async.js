(self.webpackChunk_quansitech_pallas_pc=self.webpackChunk_quansitech_pallas_pc||[]).push([[433],{43752:function(te,S,n){"use strict";n.r(S);var U=n(9122),m=n(24679),$=n(67294),t=n(85893),Z={round:function(A,b){var N=Math.pow(10,b);return Math.round(A*N)/N}};S.default=function(){var v=[{title:"\u5F00\u652F\u9879",dataIndex:"budget_name"},{title:"\u5355\u4EF7",component:"InputNumber",dataIndex:"budget_unit_price"},{title:"\u6570\u91CF",component:"TextArea",customComponentPropsFn:function(p){return{maxLength:10,minLength:5}},dataIndex:"budget_quantity"},{title:"\u8FD9\u9879\u4E0D\u53EF\u4FEE\u6539",component:"Input",dataIndex:"no_update",editable:!1},{title:"\u5C0F\u8BA1",dataIndex:"budget_subtotal",calc:function(p){var T,E;return Z.round(parseFloat((T=p==null?void 0:p.budget_unit_price)!==null&&T!==void 0?T:0)*parseFloat((E=p==null?void 0:p.budget_quantity)!==null&&E!==void 0?E:0),2)}},{title:"\u5907\u6CE8",dataIndex:"budget_remark"}],A=[{key:1,budget_name:"\u529E\u516C\u7528\u54C1",budget_unit_price:2,budget_quantity:3,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"},{key:2,budget_name:"\u7ECF\u8D39",budget_unit_price:3,budget_quantity:4,no_update:"\u4E0D\u53EF\u4FEE\u6539\u7684\u503C"}],b=function(p){var T=0;return p.forEach(function(E){var Q,h;T+=Z.round(((Q=E==null?void 0:E.budget_quantity)!==null&&Q!==void 0?Q:0)*((h=E==null?void 0:E.budget_unit_price)!==null&&h!==void 0?h:0),2)}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(m.Z.Summary.Row,{children:[(0,t.jsx)(m.Z.Summary.Cell,{index:0,colSpan:4,children:"\u5408\u8BA1"}),(0,t.jsx)(m.Z.Summary.Cell,{index:1,children:(0,t.jsx)("span",{children:T})})]})})};return(0,t.jsx)(U.l0,{name:"editableEditable",initialValues:{data:A},children:(0,t.jsx)(U.l0.Item,{name:"data",children:(0,t.jsx)(U.r8,{columns:v,summary:b,canUpdateNum:"delete_only",onChange:function(p){console.log(p)}})})})}},64699:function(te,S,n){"use strict";n.r(S);var U=n(15009),m=n.n(U),$=n(99289),t=n.n($),Z=n(5574),v=n.n(Z),A=n(9122),b=n(50719),N=n(88385),p=n(97019),T=n(78957),E=n(15867),Q=n(67294),h=n(85893);S.default=function(){var de=(0,Q.useState)(!1),le=v()(de,2),ie=le[0],L=le[1],ce=A.l0.useForm(),me=v()(ce,1),oe=me[0],fe=function(){var Y=t()(m()().mark(function W(a){return m()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return L(!0),w.next=3,fetch("/api/submit",{method:"POST",body:JSON.stringify(a)});case 3:L(!1);case 4:case"end":return w.stop()}},W)}));return function(a){return Y.apply(this,arguments)}}(),he=function(){var Y=t()(m()().mark(function W(a){var q,w;return m()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,fetch("/api/Staging?name=".concat(a));case 2:return q=G.sent,G.next=5,q.json();case 5:return w=G.sent,G.abrupt("return",w);case 7:case"end":return G.stop()}},W)}));return function(a){return Y.apply(this,arguments)}}(),re=function(){var Y=t()(m()().mark(function W(a){var q;return m()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,fetch("/api/Staging",{method:"POST",body:JSON.stringify(a)});case 2:return q=k.sent,k.next=5,q.json();case 5:return k.abrupt("return",k.sent);case 6:case"end":return k.stop()}},W)}));return function(a){return Y.apply(this,arguments)}}();return(0,h.jsx)("div",{children:(0,h.jsxs)(A.l0,{name:"assitanceListForm",form:oe,labelWrap:!0,labelCol:{span:8},onFinish:fe,submitting:ie,children:[(0,h.jsx)(A.l0.Item,{hidden:!0,name:"assistance_list_id",children:(0,h.jsx)(b.Z,{})}),(0,h.jsx)(A.l0.Item,{name:"amount",label:"\u6551\u52A9\u91D1\u989D",rules:[{required:!0}],hasFeedback:!0,children:(0,h.jsx)(N.Z,{addonAfter:"\u5143/\u5E74",min:0,precision:2,controls:!1})}),(0,h.jsx)(A.l0.Item,{name:"start_date",label:"\u5F00\u59CB\u65F6\u95F4",children:(0,h.jsx)(p.Z,{})}),(0,h.jsx)(A.l0.Item,{name:"file",label:"\u6587\u4EF6",children:(0,h.jsx)(A.gq,{action:"/api/upload"})}),(0,h.jsx)(A.l0.Buttons,{draft:!0,form:oe,initFn:he,saveFn:re,children:(0,h.jsxs)(T.Z,{children:[(0,h.jsx)(E.ZP,{type:"primary",htmlType:"submit",loading:ie,children:"\u786E\u5B9A"}),(0,h.jsx)(E.ZP,{onClick:function(){},children:"\u53D6\u6D88"})]})})]})})}},35352:function(te,S,n){"use strict";n.r(S);var U=n(9122),m=n(67294),$=n(85893);S.default=function(){var t=function(v){};return(0,$.jsx)("div",{children:(0,$.jsx)(U.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",maxCount:1,onChange:t,ifDrag:!0})})}},33198:function(te,S,n){"use strict";n.r(S);var U=n(15009),m=n.n(U),$=n(99289),t=n.n($),Z=n(9122),v=n(67294),A=n(15867),b=n(85893);S.default=function(){var N=function(T){};return(0,b.jsxs)(Z.l0,{name:"upload-form",onFinish:function(){var p=t()(m()().mark(function T(E){return m()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:console.log("value",E);case 1:case"end":return h.stop()}},T)}));return function(T){return p.apply(this,arguments)}}(),children:[(0,b.jsx)(Z.l0.Item,{name:"upload",label:"\u4E0A\u4F20",rules:[{required:!0}],children:(0,b.jsx)(Z.gq,{action:"/api/upload?cate=image",tips:"\u4E0A\u4F20\u7EC4\u4EF6",accept:"*",multiple:!0,onChange:N})}),(0,b.jsx)(A.ZP,{htmlType:"submit",children:"\u63D0\u4EA4"})]})}},9122:function(te,S,n){"use strict";n.d(S,{zx:function(){return ve},r8:function(){return Ge},l0:function(){return ne},gq:function(){return Ae}});var U=n(5574),m=n.n(U),$=n(97857),t=n.n($),Z=n(15009),v=n.n(Z),A=n(99289),b=n.n(A),N=n(13769),p=n.n(N),T=n(28459),E=n(87174),Q=n(10154),h=n(15867),de=n(27911),le=n(27484),ie=n.n(le),L=n(67294),ce=n(12444),me=n.n(ce),oe=n(72004),fe=n.n(oe),he=n(9783),re=n.n(he),Y=function(){function c(e,u,r,i){me()(this,c),re()(this,"id",void 0),re()(this,"uid",void 0),re()(this,"url",void 0),re()(this,"name",void 0),this.id=e,this.uid=u,this.url=r,this.name=i}return fe()(c,[{key:"toObject",value:function(){return{id:this.id,uid:this.uid,url:this.url,name:this.name}}},{key:"serialize",value:function(){return{type:"UploadFile",value:this.toObject()}}}],[{key:"isUploadFile",value:function(u){return u instanceof c}}]),c}(),W=Y,a=n(85893),q=["children","submitting","onFinish","readonly"],w=["children","form","draft","initFn","saveFn"],k=function(e){var u=Object.keys(e);return u=u.filter(function(r){var i=e[r];return!!i}),u.length===0},G=function(e){return{type:"dayjs",value:e}},je=function(e){return ie()(e.value)},pe=function(e){return ie().isDayjs(e)?G(e):W.isUploadFile(e)?e.serialize():e},_e=function(e){return(e==null?void 0:e.type)==="dayjs"?je(e):(e==null?void 0:e.type)==="UploadFile"?new W(e.value.id,e.value.uid,e.value.url,e.value.name):e},ne=function(e){var u=e.children,r=e.submitting,i=e.onFinish,l=e.readonly,_=p()(e,q);if(!_.name)throw new Error("Form\u7EC4\u4EF6\u5FC5\u987B\u6307\u5B9Aname\u5C5E\u6027");var j=function(){var F=b()(v()().mark(function D(g){return v()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!r){P.next=2;break}return P.abrupt("return");case 2:if(!i){P.next=5;break}return P.next=5,i(g);case 5:case"end":return P.stop()}},D)}));return function(g){return F.apply(this,arguments)}}();return(0,a.jsx)(T.ZP,{theme:{token:{colorTextDisabled:l?"#000":"rgba(0, 0, 0, 0.25)"}},children:(0,a.jsx)(E.Z,t()(t()({onFinish:j},_),{},{disabled:l,children:u}))})};ne.List=E.Z.List,ne.ErrorList=E.Z.ErrorList,ne.Item=E.Z.Item,ne.useForm=E.Z.useForm,ne.useWatch=E.Z.useWatch;var xe=function(e){var u=e.children,r=e.form,i=e.draft,l=e.initFn,_=e.saveFn,j=p()(e,w),F=(0,L.useState)(!1),D=m()(F,2),g=D[0],B=D[1],P=(0,L.useState)({}),o=m()(P,2),R=o[0],f=o[1],z=Q.ZP.useMessage(),O=m()(z,2),M=O[0],X=O[1];(0,L.useEffect)(function(){var x=function(){var I=b()(v()().mark(function K(){var s,d,V,H,C,y;return v()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(typeof l!="function"){ae.next=5;break}return ae.next=3,l(r.__INTERNAL__.name);case 3:if(s=ae.sent,s.status&&s.data){for(d=0,V=Object.entries(s.data);d<V.length;d++)H=m()(V[d],2),C=H[0],y=H[1],Array.isArray(y)?s.data[C]=y.map(function(J){return _e(J)}):s.data[C]=_e(y);f(s.data),B(!0)}case 5:case"end":return ae.stop()}},K)}));return function(){return I.apply(this,arguments)}}();i&&x()},[]);var ee=function(){var x=b()(v()().mark(function I(){var K,s,d,V,H,C,y,se;return v()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!k(r.getFieldsValue())){J.next=3;break}return M.error("\u8868\u5355\u4E3A\u7A7A\uFF0C\u6CA1\u6709\u5185\u5BB9\u53EF\u4EE5\u6682\u5B58"),J.abrupt("return");case 3:for(K=r.__INTERNAL__.name,s=r.getFieldsValue(),d=0,V=Object.entries(s);d<V.length;d++)H=m()(V[d],2),C=H[0],y=H[1],Array.isArray(y)?s[C]=y.map(function(Qe){return pe(Qe)}):s[C]=pe(y);if(typeof _!="function"){J.next=11;break}return J.next=9,_({form_name:K,form_data:s});case 9:se=J.sent,se.status?M.success("\u6682\u5B58\u6210\u529F"):M.error(se.info);case 11:case"end":return J.stop()}},I)}));return function(){return x.apply(this,arguments)}}(),ue=function(){r.setFieldsValue(R),B(!1)};return(0,a.jsxs)(a.Fragment,{children:[X,(0,a.jsxs)(E.Z.Item,t()(t()({},j),{},{children:[i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.ZP,{type:"dashed",htmlType:"button",onClick:ee,children:"\u6682\u5B58"}),(0,a.jsx)(de.Z,{title:"\u63D0\u793A",open:g,onOk:ue,onCancel:function(){return B(!1)},children:(0,a.jsx)("p",{children:"\u662F\u5426\u8981\u6062\u590D\u6682\u5B58\u7684\u8868\u5355\u6570\u636E\uFF1F"})})]}),u]}))]})};ne.Buttons=xe;var be=n(19632),ge=n.n(be),De=n(56853),Pe=n(21054),Ce=n(10911),Ee=n(74956),Fe=["tips","value","onChange","uploadTo","hashCheck","listType","ifDrag"],Oe=Ce.Z.Dragger,Ie=function(){var c=b()(v()().mark(function e(u){var r;return v()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,n(84805)("./".concat(u));case 2:return r=l.sent,l.abrupt("return",r.default);case 4:case"end":return l.stop()}},e)}));return function(u){return c.apply(this,arguments)}}(),Ae=function(e){var u=e.tips,r=e.value,i=e.onChange,l=i===void 0?function(){}:i,_=e.uploadTo,j=_===void 0?"server":_,F=e.hashCheck,D=F===void 0?!0:F,g=e.listType,B=g===void 0?"picture":g,P=e.ifDrag,o=p()(e,Fe),R=t()({listType:B},o),f=r==null?void 0:r.map(function(x){var I=x.toObject();return Object.assign(I,{uid:I.uid||I.id})}),z=Q.ZP.useMessage(),O=m()(z,2),M=O[0],X=O[1],ee=function(){var x=b()(v()().mark(function I(K){var s,d,V;return v()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(s={file:K,action:o.action,hashId:""},!D){C.next=5;break}return C.next=4,(0,Ee.UM)(K);case 4:s.hashId=C.sent;case 5:return C.next=7,Ie(j);case 7:return d=C.sent,C.next=10,d.upload(s.file,s.action,s.hashId);case 10:return V=C.sent,C.abrupt("return",V);case 12:case"end":return C.stop()}},I)}));return function(K){return x.apply(this,arguments)}}(),ue=function(){var I=t()(t()({},R),{},{onChange:function(s){var d=s.file;if(d.status==="done")if(d.response.status){var V=f||[],H={id:d.response.file_id,uid:d.uid,url:d.response.url,name:d.response.title},C=[].concat(ge()(V),[H]);o.maxCount===1?C=C.slice(-1):C=C.slice(0,o.maxCount),l(C.map(function(y){return new W(y.id,y.uid,y.url,y.name)}))}else d.response.status===0&&M.error(d.response.info);d.status==="removed"&&l(f.filter(function(y){var se=d.id||d.response.file_id;return y.id!==se}).map(function(y){return new W(y.id,y.uid,y.url,y.name)}))},defaultFileList:f,showUploadList:{showDownloadIcon:!0},onPreview:function(s){var d;window.open((s==null?void 0:s.url)||(s==null||(d=s.response)===null||d===void 0?void 0:d.url),"_blank")},customRequest:function(s){console.log("callbackProps",s),ee(s.file).then(function(d){s.onSuccess(d)})}});return(0,a.jsxs)(a.Fragment,{children:[X,P?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(Oe,t()(t()({},I),{},{children:[(0,a.jsx)("p",{className:"ant-upload-drag-icon",children:(0,a.jsx)(De.Z,{})}),(0,a.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u62D6\u62FD\u6587\u4EF6\u5230\u6B64\u533A\u57DF\u8FDB\u884C\u4E0A\u4F20"}),(0,a.jsx)("span",{className:"drag-drop-upload-tips",children:u})]}))}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Ce.Z,t()(t()({},I),{},{children:(0,a.jsx)(h.ZP,{icon:(0,a.jsx)(Pe.Z,{}),children:"\u70B9\u51FB\u4E0A\u4F20"})})),(0,a.jsx)("span",{style:{color:"#c9c6c6"},children:u})]})]})};return(0,L.useEffect)(function(){D&&(0,Ee.ZP)()},[]),(0,a.jsx)(a.Fragment,{children:ue()})},Te=n(24679),Me=n(71230),ye=n(50719),Ue=["onChange"],Be=function(e){var u=e.onChange,r=p()(e,Ue),i=function(_){e.onChange&&e.onChange(_.target.value)};return(0,a.jsx)(ye.Z,t()({onChange:i},r))},Re=Be,Se=n(88385),Le=["onChange"],$e=function(e){var u=e.onChange,r=p()(e,Le),i=function(_){e.onChange&&e.onChange(_)};return(0,a.jsx)(Se.Z,t()({bordered:!1,onChange:i},r))},Ze=$e,We=["onChange","className"],Ke=function(e){var u=window.getComputedStyle(e),r=u.getPropertyValue("box-sizing")||u.getPropertyValue("-moz-box-sizing")||u.getPropertyValue("-webkit-box-sizing"),i=parseFloat(u.getPropertyValue("padding-bottom"))+parseFloat(u.getPropertyValue("padding-top")),l=parseFloat(u.getPropertyValue("border-bottom-width"))+parseFloat(u.getPropertyValue("border-top-width")),_=e.scrollHeight;if(r==="border-box")return _+=l;if(r==="content-box")return _-=i},Ne=function(e){var u=e.onChange,r=e.className,i=r===void 0?"":r,l=p()(e,We),_=(0,L.useState)(!1),j=m()(_,2),F=j[0],D=j[1],g=T.ZP.useConfig(),B=g.componentDisabled,P=(0,L.useCallback)(function(f){l.autoSize&&B&&f&&f.resizableTextArea&&f.resizableTextArea.textArea&&(f.resizableTextArea.textArea.style.height="".concat(Ke(f.resizableTextArea.textArea),"px"))},[B]),o=function(z){e.onChange&&e.onChange(z.target.value)},R=l.value||l.defaultValue||"";return(0,a.jsxs)("div",{className:"component_editable_table_text_area",children:[(0,a.jsx)(ye.Z.TextArea,t()({ref:P,className:"component_editable_table_text_area_input ".concat(F?"focus":""," ").concat(i),onChange:o,onFocus:function(){D(!0)},onBlur:function(){D(!1)}},l)),F&&l.maxLength?(0,a.jsx)("div",{className:"component_editable_table_text_area_length",children:"".concat(R.length," / ").concat(l.maxLength)}):""]})},ze=Ne,Ve=["children","dataIndex","onChange","component","editable","calc","customComponentProps"],ke={Input:Re,InputNumber:Ze,TextArea:ze},we=(0,L.memo)(function(c){var e=c.children,u=c.dataIndex,r=c.onChange,i=c.component,l=i===void 0?"Input":i,_=c.editable,j=c.calc,F=c.customComponentProps,D=F===void 0?{}:F,g=p()(c,Ve);if(j)return(0,a.jsx)("td",t()(t()({},g),{},{children:j(g.record)}));var B=t()({defaultValue:(g==null?void 0:g.record)&&(g==null?void 0:g.record[u]),onChange:r},D);return(0,a.jsx)("td",t()(t()({},g),{},{children:_?L.createElement(ke[l],B):e}))}),Ge=function(e){var u=e.value,r=e.columns,i=e.onChange,l=e.summary,_=e.canUpdateNum,j=_===void 0?!0:_,F=T.ZP.useConfig(),D=F.componentDisabled,g=r.map(function(o){return t()(t()({},o),{},{onCell:function(f){return{record:f,dataIndex:o.dataIndex,title:o.title,component:o==null?void 0:o.component,editable:o.editable===void 0?!0:o.editable,calc:o.calc,customComponentProps:typeof o.customComponentPropsFn=="function"?o.customComponentPropsFn(f):{},onChange:function(O){i&&i(u.map(function(M,X){return M.key===f.key&&(M[o.dataIndex]=O),M}))}}}})}),B=function(R){return function(){i&&i(u.filter(function(f){return f.key!==R}))}},P=function(){var R=0,f=u!=null?u:[];f.forEach(function(O){O.key>R&&(R=O.key)});var z={};r.forEach(function(O){O.editable===!0&&(z[O.dataIndex]="")}),z.key=R+1,i&&i([].concat(ge()(f),[z]))};return!D&&j&&j!=="add_only"&&g.push({title:"\u64CD\u4F5C",dataIndex:"operation",editable:!1,width:"40px",render:function(R,f){return(0,a.jsx)(ve,{type:"primary",danger:!0,confirm:{title:"\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u5417?"},onClick:B(f.key),children:"\u5220\u9664"})}}),(0,a.jsx)(Te.Z,t()(t()({pagination:!1,rowClassName:"budget-td",components:{body:{cell:we}},summary:l},!D&&j&&j!=="delete_only"?{footer:function(){return(0,a.jsx)(Me.Z,{justify:"center",children:(0,a.jsx)(ve,{type:"primary",onClick:P,children:"\u65B0\u589E"})})}}:{}),{},{dataSource:u,columns:g,bordered:!0}))},He=n(76306),Je=["children","confirm"],ve=function(e){var u=e.children,r=e.confirm,i=p()(e,Je),l=(0,L.useState)(!1),_=m()(l,2),j=_[0],F=_[1],D=(0,L.useState)(!1),g=m()(D,2),B=g[0],P=g[1],o=(0,L.useRef)(!1),R=function(M){r||f(M)},f=function(){var O=b()(v()().mark(function M(X){var ee;return v()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!(!o.current&&i.onClick)){x.next=9;break}return o.current=!0,ee=setTimeout(function(){F(!0),P(!0)},300),x.next=5,i.onClick();case 5:clearTimeout(ee),F(!1),P(!1),o.current=!1;case 9:case"end":return x.stop()}},M)}));return function(X){return O.apply(this,arguments)}}(),z=function(M){var X=M.children,ee=function(){var ue=b()(v()().mark(function x(I){return v()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,f(I);case 2:case"end":return s.stop()}},x)}));return function(I){return ue.apply(this,arguments)}}();return r&&!j?(0,a.jsx)(He.Z,{title:r==null?void 0:r.title,description:r==null?void 0:r.description,onConfirm:ee,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:X}):X};return(0,a.jsx)(z,{children:(0,a.jsx)(h.ZP,t()(t()({loading:j,disabled:B},i),{},{onClick:R,children:u}))})}},84805:function(te,S,n){var U={"./cos":[13552,552],"./cos.ts":[13552,552],"./oss":[80503,503],"./oss.ts":[80503,503],"./server":[93928,928],"./server.ts":[93928,928],"./tos":[20311,311],"./tos.ts":[20311,311]};function m($){if(!n.o(U,$))return Promise.resolve().then(function(){var v=new Error("Cannot find module '"+$+"'");throw v.code="MODULE_NOT_FOUND",v});var t=U[$],Z=t[0];return n.e(t[1]).then(function(){return n(Z)})}m.keys=function(){return Object.keys(U)},m.id=84805,te.exports=m}}]);
